!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=new(function(){function t(e){var n=e.baseUrl,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers=r,this._authorization=r.authorization}var n,r;return n=t,(r=[{key:"renderResults",value:function(t){i.textContent=t.name,u.textContent=t.about,a.src=t.avatar}},{key:"defaultProfile",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._authorization}}).then((function(t){return t.ok?t.json():Promise.reject(t.status)})).then((function(e){t.renderResults(e)})).catch((function(t){console.log("Error: ".concat(t))}))}},{key:"editProfile",value:function(t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._authorization,"content-Type":"application/json"},body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){return t.ok?t.json():Promise.reject(t.status)})).then((function(t){console.log(t)})).catch((function(t){console.log("Error: ".concat(t))}))}},{key:"updateAvatar",value:function(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._authorization,"content-Type":"application/json"},body:JSON.stringify({avatar:t.avatar})}).then((function(t){return t.ok?t.json():Promise.reject(t.status)})).catch((function(t){console.log("Error: ".concat(t))}))}},{key:"addLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(t),{method:"PUT",headers:{authorization:this._authorization,"content-Type":"application/json"},body:JSON.stringify({name:profile.name,about:profile.about})}).then((function(t){return t.ok?t.json():Promise.reject(t.status)})).catch((function(t){console.log("Error: ".concat(t))}))}},{key:"deleteLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(t),{method:"DELETE",headers:{authorization:this._authorization,"content-Type":"application/json"},body:JSON.stringify({name:profile.name,about:profile.about})}).then((function(t){return t.ok?t.json():Promise.reject(t.status)})).catch((function(t){console.log("Error: ".concat(t))}))}},{key:"cardsAddedRequest",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._authorization}})}},{key:"addNewCardPetition",value:function(t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._authorization,"content-Type":"application/json"},body:JSON.stringify({name:t.placeName,link:t.link})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))})).catch((function(t){console.log("Error: ".concat(t))}))}},{key:"deleteCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._authorization,"content-Type":"application/json"}}).then((function(t){return t.ok?t.json():Promise.reject(t.status)})).catch((function(t){console.log("Error: ".concat(t))}))}},{key:"returnCardInfo",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"GET",headers:{authorization:this._authorization}}).then((function(t){return t.ok?t.json():Promise.reject(t.status)})).catch((function(t){console.log("Error: ".concat(t))}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}())({baseUrl:"https://around.nomoreparties.co/v1/web_es_07/",headers:{authorization:"d73ff8a4-5ad7-42cb-999c-d084ca2e6847","content-Type":"application/json"}}),r=document.querySelector(".edit-button"),o=(document.querySelector(".form__submit-button"),document.querySelector(".form__close-button"),document.querySelector(".popup_type_edit-profile")),i=document.querySelector(".profile__user-name"),u=document.querySelector(".profile__user-profession"),a=document.querySelector(".profile__avatar"),c=(document.querySelector("#name-input"),document.querySelector("#about-me-input"),document.querySelector(".add-button")),l=(document.querySelector(".form__close-button_type_new-place"),document.querySelector(".popup_type_new-place")),s=(document.querySelector(".form__submit-button_place"),document.querySelector(".card-container"),document.querySelector(".popup_type_photo")),f=document.querySelector(".popup__photo"),p=document.querySelector(".popup__photo-caption"),y=document.querySelector(".popup__close-button"),m=document.querySelector(".form__submit-button_delete"),d=document.querySelector(".popup_type_delete"),h=document.querySelector(".form__close-button_type_delete"),b=document.querySelector(".popup_type_update-avatar"),v=document.querySelector(".profile__avatar-overlay"),_=document.querySelector(".profile__avatar");function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var w=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._itemsArray=r,this._renderer=o,this._container=n}var e,n;return e=t,(n=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"renderItems",value:function(){var t=this;this._itemsArray.forEach((function(e){t._renderer(e)}))}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}var j=/^[A-Za-z\-]{2,100}$/,P=/^[A-Za-z\-]{2,20}$/,O=/^[A-Za-z\-]{3,20}$/,C=/^[A-Za-z\-]{4,500}$/,q=/^[A-Za-z\-]{4,500}$/,L=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}var e,n;return e=t,(n=[{key:"switchingInput",value:function(t){switch(t.target.name){case"name":this._checkInputValidity(j,t.target,this._formSelector);break;case" aboutMe":this._checkInputValidity(P,t.target,this._formSelector);break;case"placeName":this._checkInputValidity(O,t.target,this._formSelector);break;case"link":this._checkInputValidity(C,t.target,this._formSelector);break;case"updateAvatar":this._checkInputValidity(q,t.target,this._formSelector)}}},{key:"_checkInputValidity",value:function(t,e,n){var r=document.getElementById(n).querySelector(".".concat(e.id,"-error"));t.test(e.value)?(r.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass),r.textContent=""):(r.textContent=e.validationMessage,r.classList.add(this._errorClass),e.classList.add(this._inputErrorClass))}},{key:"isValid",value:function(t){return document.getElementById(t).querySelectorAll(this._inputSelector).every((function(t){return t.validity.valid}))}},{key:"toggleBtnState",value:function(t){var e=document.getElementById(t).querySelector(this._submitButtonSelector);!0===this.isValid(t)?e.classList.remove(this._inactiveButtonClass):e.classList.add(this._inactiveButtonClass)}},{key:"enableValidation",value:function(){var t=this,e=document.getElementById(this._formSelector),n=Array.from(e.querySelectorAll(this._inputSelector));this.toggleBtnState(this._formSelector),n.forEach((function(e){e.addEventListener("input",(function(e){t.switchingInput(e),t.toggleBtnState(t._formSelector)}))}))}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}var I=document.querySelector(".card-container"),R=function(){function t(e,n){var r=e.data,o=e.photoHandler,i=e.deleteHandler;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=r.name,this._link=r.link,this._id=r._id,this._likes=r.likes,this._templateSelector=n,this._photoHandler=o,this._deleteHandler=i,this._likes=r.likes}var e,r;return e=t,(r=[{key:"getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".place-card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._cardElement=this.getTemplate(),this._cardElement.querySelector(".place-card__name").textContent=this._name,this._cardElement.querySelector(".place-card__photo").src=this._link,this._cardElement.id=this._id,this._cardElement.querySelector(".like-button-counter").textContent=this._likes.length,this._setEventListeners(),this._cardElement}},{key:"_handleOpenPopup",value:function(){this._photoHandler(this._link,this._name)}},{key:"_handleClosePopup",value:function(){f.src=" ",p.textContent=" ",s.classList.remove("popup_opened")}},{key:"likeadding",value:function(){}},{key:"_setEventListeners",value:function(){var t=this;this._cardElement.querySelector(".place-card__photo").addEventListener("click",(function(){t._handleOpenPopup()})),y.addEventListener("click",(function(){t._handleClosePopup()})),this._cardElement.querySelector(".trash-button").addEventListener("click",(function(e){t._deleteHandler(t._cardElement.id)})),this._cardElement.querySelector(".like-button").addEventListener("click",(function(e){e.target.classList.toggle("like-button_active"),e.target.classList.contains("like-button_active")?n.addLike(t._cardElement.id).then((function(e){var n=e.likes;t._cardElement.querySelector(".like-button-counter").textContent=n.length})):n.deleteLike(t._cardElement.id).then((function(e){var n=e.likes;t._cardElement.querySelector(".like-button-counter").textContent=n.length}))}))}},{key:"trashBtnFunctions",value:function(){this._cardElement.querySelector(".trash-button").closest(".place-card").remove()}}])&&B(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===z(o)?o:String(o)),r)}var o}var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=e,this._form=e.querySelector(".form")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened")}},{key:"close",value:function(){this._popup.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(){var t=this;document.addEventListener("keydown",(function(e){e.preventDefault,"Escape"===e.key&&t.close()}))}},{key:"setEventListeners",value:function(t){var e=this;t.addEventListener("click",(function(){e.open()})),this._handleEscClose(),this._form.querySelector(".form__close-button").addEventListener("click",(function(t){t.preventDefault(),e.close()}))}}])&&H(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==A(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===A(o)?o:String(o)),r)}var o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},V.apply(this,arguments)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(r);if(o){var n=N(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,t)}return e=u,(n=[{key:"open",value:function(t,e){V(N(u.prototype),"open",this).call(this),this._photo=document.querySelector(".popup__photo").src=t,this._caption=document.querySelector(".popup__photo-caption").textContent=e}}])&&U(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(x);function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==J(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===J(o)?o:String(o)),r)}var o}function Z(){return Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Z.apply(this,arguments)}function $(t,e){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$(t,e)}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},G(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=G(r);if(o){var n=G(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=t.formSubmitHandler;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._formSubmitHandler=r,n._form=n._popup.querySelector(".form"),n}return e=u,(n=[{key:"close",value:function(){var t=this;Z(G(u.prototype),"close",this).call(this),this._form.id,this._form.reset(),this._popup.querySelector(".overlay").addEventListener("click",(function(e){t._popup.classList.remove("popup_opened"),e.stopImmediatePropagation()}))}},{key:"getInputValues",value:function(){this._inputList=this._form.querySelectorAll(".form__input");var t={};return this._inputList.forEach((function(e){t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(t){var e=this;this.getInputValues(),Z(G(u.prototype),"setEventListeners",this).call(this,t),this._form.addEventListener("submit",(function(t){t.preventDefault(),t.stopImmediatePropagation(),e._formSubmitHandler(e.getInputValues()),document.forms.place.reset()}))}},{key:"renderLoading",value:function(t){t?this._form.querySelector(".form__submit-button").textContent="Guardando...":(this._form.querySelector(".form__submit-button").textContent="Guardado",this.close())}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(x);function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Q(o)?o:String(o)),r)}var o}var X=function(){function t(e){var n=e.data;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=n.name,this._userAboutMe=n["about-me"]}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){this._userName=i.textContent,this._userAboutMe=u.textContent}},{key:"setUserInfo",value:function(){i.textContent=this._userName,u.textContent=this._userAboutMe}}])&&W(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Y(o)?o:String(o)),r)}var o}function et(t,e){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},et(t,e)}function nt(t){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nt(t)}var rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&et(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=nt(r);if(o){var n=nt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=t.submitHandler;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitHandler=r,n._form=n._popup.querySelector(".form"),n}return e=u,(n=[{key:"setEventListeners",value:function(){var t=this;m.addEventListener("click",(function(e){e.preventDefault(),e.stopImmediatePropagation(),t._submitHandler(),t.close()})),h.addEventListener("click",(function(e){e.preventDefault(),t.close()}))}},{key:"submitFunctions",value:function(){var t=this;m.addEventListener("click",(function(e){e.preventDefault(),e.stopImmediatePropagation(),t._submitHandler(),t.close()})),h.addEventListener("click",(function(e){e.preventDefault(),t.close()}))}}])&&tt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(x);new L({formSelector:"profile",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}).enableValidation(),new L({formSelector:"place",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}).enableValidation(),new L({formSelector:"avatar",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}).enableValidation(),n.defaultProfile();var ot=new K({formSubmitHandler:function(t){ot.renderLoading(!0),n.editProfile({name:t.name,about:t["about-me"]}).then((function(t){!function(t){var e=new X({data:t});e.setUserInfo(),e.getUserInfo()}(t)})).finally((function(){ot.renderLoading(!1)}))}},o);ot.setEventListeners(r);var it,ut=[];n.cardsAddedRequest().then((function(t){return t.ok?t.json():Promise.reject(t.status)})).then((function(t){!function(t){t.forEach((function(t){ut.push(t)}));var e=new w({items:ut,renderer:function(t){var r=new R({data:t,photoHandler:function(t,e){new F(s).open(t,e)},deleteHandler:function(t){var e=new rt({submitHandler:function(){n.deleteCard(t).then((function(t){})),r.trashBtnFunctions()}},d);e.setEventListeners(),e.open()}},"#card-template"),o=r.generateCard();e.addItem(o)}},I);e.renderItems()}(t)})).catch((function(t){console.log("Error: ".concat(t))})),(it=new K({formSubmitHandler:function(t){it.renderLoading(!0),n.addNewCardPetition(t).then((function(t){var e;document.querySelector(".card-container").prepend((e=new R({data:t,photoHandler:function(t,e){new F(s).open(t,e)},deleteHandler:function(t){var r=new rt({submitHandler:function(){n.deleteCard(t),e.trashBtnFunctions()}},d);r.submitFunctions(),r.open()}},"#card-template")).generateCard()),it.close()})).finally((function(){ot.renderLoading(!1)}))}},l)).setEventListeners(c);var at=new K({formSubmitHandler:function(t){at.renderLoading(!0),n.updateAvatar({avatar:t.updateAvatar}).then((function(t){var e;e=t.avatar,_.src=e})).finally((function(){at.renderLoading(!1)}))}},b);at.setEventListeners(v)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNqQyxHQUNKLEdBRUZwSSxJQUVhMkksa0JBQWtCNUksR0FNbkMsSUFBTStKLEdBQWtCLElBQUkvQyxFQUMxQixDQUNFQyxrQkFBbUIsU0FBQzNILEdBQ2xCeUssR0FBZ0IxQixlQUFjLEdBRTlCekwsRUFDR29OLGFBQWEsQ0FDWi9MLE9BQVFxQixFQUFLMEssZUFFZDNMLE1BQUssU0FBQ0MsR0FaZixJQUFzQjJMLElBYUMzTCxFQUFJTCxPQVp6QjBDLEVBQWMzQyxJQUFNaU0sQ0FhZCxJQUNDdEIsU0FBUSxXQUNQb0IsR0FBZ0IxQixlQUFjLEVBQ2hDLEdBQ0osR0FFRjVILEdBRUZzSixHQUFnQm5CLGtCQUFrQmxJLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9BUEkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L3V0aWxzL0RhdGEuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL3NjcmlwdC9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9Qb3B1cENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIHVzZXJOYW1lLFxyXG4gIHBvcHVwUGhvdG8sXHJcbiAgdXNlckFib3V0TWUsXHJcbiAgdXNlckF2YXRhcixcclxuICBsaWtlQ291bnRlcixcclxuICBwb3B1cERlbGV0ZUNhcmQsXHJcbiAgYXBpLFxyXG59IGZyb20gXCIuLi91dGlscy9EYXRhXCI7XHJcbmltcG9ydCB7IHJlbmRlckNhcmRzLCBhZGRlZENhcmRzQXJyYXkgfSBmcm9tIFwiLi4vLi4vaW5kZXguanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgdGhpcy5fYXV0aG9yaXphdGlvbiA9IGhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICB9XHJcbiAgLy8gUHJvZmlsZSBBUElcclxuICByZW5kZXJSZXN1bHRzKHVzZXJEYXRhKSB7XHJcbiAgICB1c2VyTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgICB1c2VyQWJvdXRNZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xyXG4gICAgdXNlckF2YXRhci5zcmMgPSB1c2VyRGF0YS5hdmF0YXI7XHJcbiAgfVxyXG4gIGRlZmF1bHRQcm9maWxlKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJSZXN1bHRzKHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZWRpdFByb2ZpbGUobmV3UHJvZmlsZSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgXCJjb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuZXdQcm9maWxlLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IG5ld1Byb2ZpbGUuYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgdXBkYXRlQXZhdGFyKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICBcImNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgLy9saWtlc1xyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiY29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBwcm9maWxlLmFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgICB9KVxyXG5cclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiY29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBwcm9maWxlLmFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgICB9KVxyXG5cclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIC8vIHRlcm1pbmEgcHJvZmlsZSBmdW5jdGlvbnNcclxuICBjYXJkc0FkZGVkUmVxdWVzdCgpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmRQZXRpdGlvbihuZXdDYXJkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiY29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmV3Q2FyZC5wbGFjZU5hbWUsXHJcbiAgICAgICAgbGluazogbmV3Q2FyZC5saW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+XHJcbiAgICAgICAgcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApXHJcbiAgICAgIClcclxuXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgXCJjb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuQ2FyZEluZm8oY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XHJcbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzXzA3L1wiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZDczZmY4YTQtNWFkNy00MmNiLTk5OWMtZDA4NGNhMmU2ODQ3XCIsXHJcbiAgICBcImNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbi8vY29uc3RhbnRlcyB1bml2ZXJzYWxlc1xyXG5leHBvcnQgY29uc3QgYnRuRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYnRuQ3JlYXRlUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGJ0bkNsb3NlRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX2Nsb3NlLWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCB1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdXNlci1uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgdXNlckFib3V0TWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3VzZXItcHJvZmVzc2lvblwiKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWUtaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCB1c2VyUHJvZmVzc2lvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhYm91dC1tZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IGJ0bkFkZE5ld1BsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYnRuQ2xvc2VOZXdQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV9fY2xvc2UtYnV0dG9uX3R5cGVfbmV3LXBsYWNlXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQWRkTmV3UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfbmV3LXBsYWNlXCIpO1xyXG5leHBvcnQgY29uc3QgYnRuU3VibWl0TmV3UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX3N1Ym1pdC1idXR0b25fcGxhY2VcIlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkLWNvbnRhaW5lclwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfcGhvdG9cIik7XHJcblxyXG4vL3BvcHVwIHBob3RvXHJcbmV4cG9ydCBjb25zdCBsaW5rUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19waG90b1wiKTtcclxuZXhwb3J0IGNvbnN0IGNhcHRpb25Qb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3Bob3RvLWNhcHRpb25cIik7XHJcbmV4cG9ydCBjb25zdCBidG5DbG9zZVBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5cclxuLy9kZWxldGUgcG9wdXBcclxuZXhwb3J0IGNvbnN0IGJ0bkRlbGV0ZUNvbmZpcm1hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV9fc3VibWl0LWJ1dHRvbl9kZWxldGVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcG9wdXBEZWxldGVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2RlbGV0ZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNsb3NlRGVsZXRlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX2Nsb3NlLWJ1dHRvbl90eXBlX2RlbGV0ZVwiXHJcbik7XHJcbi8vZWRpdCBBdmF0YXJcclxuZXhwb3J0IGNvbnN0IHBvcHVwVXBkYXRlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF90eXBlX3VwZGF0ZS1hdmF0YXJcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgYnRuVXBkYXRlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19hdmF0YXItb3ZlcmxheVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtc0FycmF5ID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXNBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IHJlZ0V4ID0ge1xyXG4gIG5hbWU6IC9eW0EtWmEtelxcLV17MiwxMDB9JC8sXHJcbiAgYWJvdXRNZTogL15bQS1aYS16XFwtXXsyLDIwfSQvLFxyXG4gIHBsYWNlTmFtZTogL15bQS1aYS16XFwtXXszLDIwfSQvLFxyXG4gIGxpbms6IC9eW0EtWmEtelxcLV17NCw1MDB9JC8sXHJcbiAgdXBkYXRlQXZhdGFyOiAvXltBLVphLXpcXC1dezQsNTAwfSQvLFxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKG9ialRvVmFsaWRhdGUpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IG9ialRvVmFsaWRhdGUuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9ialRvVmFsaWRhdGUuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb2JqVG9WYWxpZGF0ZS5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvYmpUb1ZhbGlkYXRlLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvYmpUb1ZhbGlkYXRlLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvYmpUb1ZhbGlkYXRlLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG4gIC8vdGVybWluYSBlbCBjb25zdHJ1Y3RvclxyXG4gIHN3aXRjaGluZ0lucHV0KGV2dCkge1xyXG4gICAgc3dpdGNoIChldnQudGFyZ2V0Lm5hbWUpIHtcclxuICAgICAgY2FzZSBcIm5hbWVcIjpcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkocmVnRXgubmFtZSwgZXZ0LnRhcmdldCwgdGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCIgYWJvdXRNZVwiOlxyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShyZWdFeC5hYm91dE1lLCBldnQudGFyZ2V0LCB0aGlzLl9mb3JtU2VsZWN0b3IpO1xyXG5cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInBsYWNlTmFtZVwiOlxyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShcclxuICAgICAgICAgIHJlZ0V4LnBsYWNlTmFtZSxcclxuICAgICAgICAgIGV2dC50YXJnZXQsXHJcbiAgICAgICAgICB0aGlzLl9mb3JtU2VsZWN0b3JcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcImxpbmtcIjpcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkocmVnRXgubGluaywgZXZ0LnRhcmdldCwgdGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJ1cGRhdGVBdmF0YXJcIjpcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoXHJcbiAgICAgICAgICByZWdFeC51cGRhdGVBdmF0YXIsXHJcbiAgICAgICAgICBldnQudGFyZ2V0LFxyXG4gICAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yXHJcbiAgICAgICAgKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShleHByZXNpb24sIGlucHV0RWxlbWVudCwgZm9ybUlEKSB7XHJcbiAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcm1JRCk7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgaWYgKGV4cHJlc2lvbi50ZXN0KGlucHV0RWxlbWVudC52YWx1ZSkpIHtcclxuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyB0ZXJtaW5hIGNoZWNrIHNob3cgZXJyb3JcclxuICAvLyBpcyB2YWxpZFxyXG5cclxuICBpc1ZhbGlkKGZvcm1JRCkge1xyXG4gICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmb3JtSUQpO1xyXG4gICAgY29uc3QgaW5wdXRzTGlzdCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XHJcblxyXG4gICAgcmV0dXJuIGlucHV0c0xpc3QuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyB0b2dnbGVCdG5cclxuICB0b2dnbGVCdG5TdGF0ZShmb3JtSUQpIHtcclxuICAgIGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ybUlEKTtcclxuICAgIGNvbnN0IGJ0bkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICBpZiAodGhpcy5pc1ZhbGlkKGZvcm1JRCkgPT09IHRydWUpIHtcclxuICAgICAgYnRuRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnRuRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9wcnVlYmEgZW5hYmxlIHZhbGlkYXRpb25cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9mb3JtU2VsZWN0b3IpO1xyXG5cclxuICAgIGNvbnN0IGlucHV0c0xpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy50b2dnbGVCdG5TdGF0ZSh0aGlzLl9mb3JtU2VsZWN0b3IpO1xyXG4gICAgaW5wdXRzTGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc3dpdGNoaW5nSW5wdXQoZXZ0KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ0blN0YXRlKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbi8vdGVybWluYSBvYmpldG9cclxuLy8gIHBydWViYSBQYXJhIFByb2ZpbGUgZm9ybVxyXG5cclxuLy9Qcm95ZWN0byA4XHJcbiIsImltcG9ydCB7XHJcbiAgcG9wdXBQaG90byxcclxuICBsaW5rUG9wdXAsXHJcbiAgY2FwdGlvblBvcHVwLFxyXG4gIGJ0bkNsb3NlUGhvdG8sXHJcbiAgYXBpLFxyXG59IGZyb20gXCIuLi91dGlscy9EYXRhLmpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtY29udGFpbmVyXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcGhvdG9IYW5kbGVyLCBkZWxldGVIYW5kbGVyIH0sIHRlbXBsYXRlU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fcGhvdG9IYW5kbGVyID0gcGhvdG9IYW5kbGVyO1xyXG4gICAgdGhpcy5fZGVsZXRlSGFuZGxlciA9IGRlbGV0ZUhhbmRsZXI7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgfVxyXG4gIGdldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50O1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGVcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2UtY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLmdldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlLWNhcmRfX25hbWVcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZS1jYXJkX19waG90b1wiKS5zcmMgPSB0aGlzLl9saW5rO1xyXG5cclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LmlkID0gdGhpcy5faWQ7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpa2UtYnV0dG9uLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZU9wZW5Qb3B1cCgpIHtcclxuICAgIHRoaXMuX3Bob3RvSGFuZGxlcih0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVDbG9zZVBvcHVwKCkge1xyXG4gICAgbGlua1BvcHVwLnNyYyA9IFwiIFwiO1xyXG4gICAgY2FwdGlvblBvcHVwLnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgICBwb3B1cFBob3RvLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgfVxyXG4gIGxpa2VhZGRpbmcoKSB7fVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wbGFjZS1jYXJkX19waG90b1wiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVPcGVuUG9wdXAoKTtcclxuICAgICAgfSk7XHJcbiAgICBidG5DbG9zZVBob3RvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNsb3NlUG9wdXAoKTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgdHJhc2hCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRyYXNoLWJ1dHRvblwiKTtcclxuICAgIHRyYXNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUhhbmRsZXIodGhpcy5fY2FyZEVsZW1lbnQuaWQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgbGlrZUljb24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpa2UtYnV0dG9uXCIpO1xyXG4gICAgbGlrZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwibGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJsaWtlLWJ1dHRvbl9hY3RpdmVcIikpIHtcclxuICAgICAgICBhcGkuYWRkTGlrZSh0aGlzLl9jYXJkRWxlbWVudC5pZCkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBsaWtlc2luaXRBcnJheSA9IHJlcy5saWtlcztcclxuXHJcbiAgICAgICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpa2UtYnV0dG9uLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICBsaWtlc2luaXRBcnJheS5sZW5ndGg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUxpa2UodGhpcy5fY2FyZEVsZW1lbnQuaWQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgY29uc3QgbGlrZXNpbml0QXJyYXkgPSByZXMubGlrZXM7XHJcbiAgICAgICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpa2UtYnV0dG9uLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICBsaWtlc2luaXRBcnJheS5sZW5ndGg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJhc2hCdG5GdW5jdGlvbnMoKSB7XHJcbiAgICBjb25zdCB0cmFzaEJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHJhc2gtYnV0dG9uXCIpO1xyXG4gICAgY29uc3QgY2FyZFRvUmVtb3ZlID0gdHJhc2hCdG4uY2xvc2VzdChcIi5wbGFjZS1jYXJkXCIpO1xyXG4gICAgY2FyZFRvUmVtb3ZlLnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHRoaXMuX3BvcHVwID0gcG9wdXA7XHJcbiAgICB0aGlzLl9mb3JtID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdDtcclxuICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycyhvcGVuQnV0dG9uKSB7XHJcbiAgICBvcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMub3BlbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5mb3JtX19jbG9zZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy8gcG9wdXAgd2l0aCBpbWFnZVxyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICB9XHJcbiAgb3BlbihzcmMsIG5hbWUpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX3Bob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGhvdG9cIikuc3JjID0gc3JjO1xyXG5cclxuICAgIHRoaXMuX2NhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9fcGhvdG8tY2FwdGlvblwiXHJcbiAgICApLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBmb3JtU3VibWl0SGFuZGxlciB9LCBwb3B1cCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5fZm9ybVN1Ym1pdEhhbmRsZXIgPSBmb3JtU3VibWl0SGFuZGxlcjtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICBpZiAodGhpcy5fZm9ybS5pZCA9PSBcInBsYWNlXCIgfHwgXCJhdmF0YXJcIikge1xyXG4gICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgICAgZXZ0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGdldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycyhvcGVuQnV0dG9uKSB7XHJcbiAgICB0aGlzLmdldElucHV0VmFsdWVzKCk7XHJcblxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMob3BlbkJ1dHRvbik7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgZXZ0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgICB0aGlzLl9mb3JtU3VibWl0SGFuZGxlcih0aGlzLmdldElucHV0VmFsdWVzKCkpO1xyXG5cclxuICAgICAgZG9jdW1lbnQuZm9ybXMucGxhY2UucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIikudGV4dENvbnRlbnQgPVxyXG4gICAgICAgIFwiR3VhcmRhbmRvLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiR3VhcmRhZG9cIjtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyB1c2VyTmFtZSwgdXNlckFib3V0TWUgfSBmcm9tIFwiLi4vdXRpbHMvRGF0YS5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB1c2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fdXNlckFib3V0TWUgPSBkYXRhW1wiYWJvdXQtbWVcIl07XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZS50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX3VzZXJBYm91dE1lID0gdXNlckFib3V0TWUudGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbygpIHtcclxuICAgIHVzZXJOYW1lLnRleHRDb250ZW50ID0gdGhpcy5fdXNlck5hbWU7XHJcbiAgICB1c2VyQWJvdXRNZS50ZXh0Q29udGVudCA9IHRoaXMuX3VzZXJBYm91dE1lO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuaW1wb3J0IHsgYnRuRGVsZXRlQ29uZmlybWF0aW9uLCBjbG9zZURlbGV0ZVBvcHVwIH0gZnJvbSBcIi4uL3V0aWxzL0RhdGEuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBzdWJtaXRIYW5kbGVyIH0sIHBvcHVwKSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGJ0bkRlbGV0ZUNvbmZpcm1hdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgZXZ0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcigpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICAgIGNsb3NlRGVsZXRlUG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgc3VibWl0RnVuY3Rpb25zKCkge1xyXG4gICAgYnRuRGVsZXRlQ29uZmlybWF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBldnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIoKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjbG9zZURlbGV0ZVBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQge1xyXG4gIGJ0bkVkaXRQcm9maWxlLFxyXG4gIHBvcHVwRWRpdFByb2ZpbGUsXHJcbiAgcG9wdXBQaG90byxcclxuICBwb3B1cEFkZE5ld1BsYWNlLFxyXG4gIGJ0bkFkZE5ld1BsYWNlLFxyXG4gIHBvcHVwRGVsZXRlQ2FyZCxcclxuICBhcGksXHJcbiAgcG9wdXBVcGRhdGVBdmF0YXIsXHJcbiAgYnRuVXBkYXRlQXZhdGFyLFxyXG4gIHByb2ZpbGVBdmF0YXIsXHJcbn0gZnJvbSBcIi4vc2NyaXB0L3V0aWxzL0RhdGEuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vc2NyaXB0L2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5cclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuL3NjcmlwdC9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgQ2FyZCwgY2FyZHNDb250YWluZXIgfSBmcm9tIFwiLi9zY3JpcHQvY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9zY3JpcHQvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi9zY3JpcHQvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB1c2VySW5mbyBmcm9tIFwiLi9zY3JpcHQvY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgUG9wdXBDb25maXJtYXRpb24gZnJvbSBcIi4vc2NyaXB0L2NvbXBvbmVudHMvUG9wdXBDb25maXJtYXRpb25cIjtcclxuXHJcbi8vIG9iamV0b3MgcGFyYSB2YWxpZGFyXHJcbmNvbnN0IHZhbGlkYXRpb25PYmplY3QgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcInByb2ZpbGVcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuY29uc3QgdmFsaWRhdGlvbk9iamVjdDIgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcInBsYWNlXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuY29uc3QgdmFsaWRhdGlvbk9iamVjdEF2YXRhciA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiYXZhdGFyXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuXHJcbi8vbGxhbWFuZG8gYSBGb3JtVmFsaWRhdG9yXHJcbmNvbnN0IFByb2ZpbGVWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbk9iamVjdCk7XHJcblByb2ZpbGVWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuLy9wcnVlYmEgcGFyYSBwbGFjZSBmb3JtXHJcbmNvbnN0IFBsYWNlVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25PYmplY3QyKTtcclxuUGxhY2VWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgYXZhdGFyVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25PYmplY3RBdmF0YXIpO1xyXG5hdmF0YXJWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuLy9wb3B1cCBmb3JtIHByb2ZpbGVcclxuXHJcbmFwaS5kZWZhdWx0UHJvZmlsZSgpO1xyXG5mdW5jdGlvbiByZW5kZXJQcm9maWxlSW5mbyhkYXRhKSB7XHJcbiAgY29uc3QgdXNlciA9IG5ldyB1c2VySW5mbyh7IGRhdGE6IGRhdGEgfSk7XHJcbiAgdXNlci5zZXRVc2VySW5mbygpO1xyXG4gIHVzZXIuZ2V0VXNlckluZm8oKTtcclxufVxyXG5jb25zdCBmb3JtUG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgZm9ybVN1Ym1pdEhhbmRsZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgIC8vIGFxdWkgZW1waWV6YSBjYWxsYmFja1xyXG4gICAgICBmb3JtUG9wdXBQcm9maWxlLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgICBhcGlcclxuICAgICAgICAuZWRpdFByb2ZpbGUoe1xyXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgYWJvdXQ6IGRhdGFbXCJhYm91dC1tZVwiXSxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIHJlbmRlclByb2ZpbGVJbmZvKHJlcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICBmb3JtUG9wdXBQcm9maWxlLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgLy9hcXVpIHRlcm1pbmFcclxuICB9LFxyXG4gIHBvcHVwRWRpdFByb2ZpbGVcclxuKTtcclxuZm9ybVBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycyhidG5FZGl0UHJvZmlsZSk7XHJcblxyXG4vLyBmdW5jaW9uZXMgZGUgcGVyZmlsXHJcblxyXG4vLyBSZW5kZWl6YXIgaW5pdGlhbCBDYXJkc1xyXG5leHBvcnQgY29uc3QgYWRkZWRDYXJkc0FycmF5ID0gW107XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyQ2FyZHMoZGF0YUFycmF5KSB7XHJcbiAgZGF0YUFycmF5LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgIGFkZGVkQ2FyZHNBcnJheS5wdXNoKGl0ZW0pO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBkZWZhdWx0Q2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICAgIHtcclxuICAgICAgaXRlbXM6IGFkZGVkQ2FyZHNBcnJheSxcclxuICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkYXRhOiBpdGVtLFxyXG4gICAgICAgICAgICBwaG90b0hhbmRsZXI6IChzcmMsIG5hbWUpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBwaG90byA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cFBob3RvKTtcclxuICAgICAgICAgICAgICBjb25zdCBuZXdQaG90byA9IHBob3RvLm9wZW4oc3JjLCBuYW1lKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVsZXRlSGFuZGxlcjogKGlkKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uID0gbmV3IFBvcHVwQ29uZmlybWF0aW9uKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBzdWJtaXRIYW5kbGVyOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUNhcmQoaWQpLnRoZW4oKHJlcykgPT4ge30pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcmQudHJhc2hCdG5GdW5jdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwb3B1cERlbGV0ZUNhcmRcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIGNvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICAgICAgICBjb25maXJtYXRpb24ub3BlbigpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIFwiI2NhcmQtdGVtcGxhdGVcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgICAgZGVmYXVsdENhcmRMaXN0LmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgY2FyZHNDb250YWluZXJcclxuICApO1xyXG4gIGRlZmF1bHRDYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0aWFsQ2FyZHNSZXF1ZXN0KCkge1xyXG4gIGNvbnN0IGluaXRpYWxDYXJkc0FwaSA9IGFwaS5jYXJkc0FkZGVkUmVxdWVzdCgpO1xyXG4gIGluaXRpYWxDYXJkc0FwaVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZHMocmVzKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcclxuICAgIH0pO1xyXG59XHJcbmluaXRpYWxDYXJkc1JlcXVlc3QoKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU5ld0NhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGFwaUNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YTogaXRlbSxcclxuICAgICAgcGhvdG9IYW5kbGVyOiAoc3JjLCBuYW1lKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGhvdG8gPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBQaG90byk7XHJcbiAgICAgICAgY29uc3QgbmV3UGhvdG8gPSBwaG90by5vcGVuKHNyYywgbmFtZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGRlbGV0ZUhhbmRsZXI6IChpZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cENvbmZpcm1hdGlvbihcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc3VibWl0SGFuZGxlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGlkKTtcclxuICAgICAgICAgICAgICBhcGlDYXJkLnRyYXNoQnRuRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcG9wdXBEZWxldGVDYXJkXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25maXJtYXRpb24uc3VibWl0RnVuY3Rpb25zKCk7XHJcblxyXG4gICAgICAgIGNvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIGFwaUNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuZnVuY3Rpb24gbmV3Q2FyZEFwaSgpIHtcclxuICBjb25zdCBmb3JtUG9wdXBQbGFjZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCAvLyBkZWNsYXJhbmRvIGZvcm1cclxuICAgIHtcclxuICAgICAgZm9ybVN1Ym1pdEhhbmRsZXI6IChuZXdDYXJkKSA9PiB7XHJcbiAgICAgICAgZm9ybVBvcHVwUGxhY2UucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuYWRkTmV3Q2FyZFBldGl0aW9uKG5ld0NhcmQpXHJcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZC1jb250YWluZXJcIilcclxuICAgICAgICAgICAgICAucHJlcGVuZChjcmVhdGVOZXdDYXJkKHJlc3VsdCkpO1xyXG4gICAgICAgICAgICBmb3JtUG9wdXBQbGFjZS5jbG9zZSgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgZm9ybVBvcHVwUHJvZmlsZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHBvcHVwQWRkTmV3UGxhY2VcclxuICApO1xyXG4gIGZvcm1Qb3B1cFBsYWNlLnNldEV2ZW50TGlzdGVuZXJzKGJ0bkFkZE5ld1BsYWNlKTtcclxufVxyXG5uZXdDYXJkQXBpKCk7XHJcbmZ1bmN0aW9uIHJlbmRlckF2YXRhcihhdmF0YXJVcmwpIHtcclxuICBwcm9maWxlQXZhdGFyLnNyYyA9IGF2YXRhclVybDtcclxufVxyXG5jb25zdCBuZXdQcGRhdGVBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBmb3JtU3VibWl0SGFuZGxlcjogKGRhdGEpID0+IHtcclxuICAgICAgbmV3UHBkYXRlQXZhdGFyLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgICBhcGlcclxuICAgICAgICAudXBkYXRlQXZhdGFyKHtcclxuICAgICAgICAgIGF2YXRhcjogZGF0YS51cGRhdGVBdmF0YXIsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICByZW5kZXJBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICBuZXdQcGRhdGVBdmF0YXIucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgcG9wdXBVcGRhdGVBdmF0YXJcclxuKTtcclxubmV3UHBkYXRlQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKGJ0blVwZGF0ZUF2YXRhcik7XHJcbiJdLCJuYW1lcyI6WyJhcGkiLCJBcGkiLCJfcmVmIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9hdXRob3JpemF0aW9uIiwiYXV0aG9yaXphdGlvbiIsImtleSIsInZhbHVlIiwidXNlckRhdGEiLCJ1c2VyTmFtZSIsInRleHRDb250ZW50IiwibmFtZSIsInVzZXJBYm91dE1lIiwiYWJvdXQiLCJ1c2VyQXZhdGFyIiwic3JjIiwiYXZhdGFyIiwiX3RoaXMiLCJmZXRjaCIsImNvbmNhdCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwicmVuZGVyUmVzdWx0cyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwibmV3UHJvZmlsZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImNhcmRJZCIsInByb2ZpbGUiLCJuZXdDYXJkIiwicGxhY2VOYW1lIiwibGluayIsImJ0bkVkaXRQcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBFZGl0UHJvZmlsZSIsImJ0bkFkZE5ld1BsYWNlIiwicG9wdXBBZGROZXdQbGFjZSIsInBvcHVwUGhvdG8iLCJsaW5rUG9wdXAiLCJjYXB0aW9uUG9wdXAiLCJidG5DbG9zZVBob3RvIiwiYnRuRGVsZXRlQ29uZmlybWF0aW9uIiwicG9wdXBEZWxldGVDYXJkIiwiY2xvc2VEZWxldGVQb3B1cCIsInBvcHVwVXBkYXRlQXZhdGFyIiwiYnRuVXBkYXRlQXZhdGFyIiwicHJvZmlsZUF2YXRhciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXNBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsImZvckVhY2giLCJyZWdFeCIsIkZvcm1WYWxpZGF0b3IiLCJvYmpUb1ZhbGlkYXRlIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImV2dCIsInRhcmdldCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJleHByZXNpb24iLCJpbnB1dEVsZW1lbnQiLCJmb3JtSUQiLCJlcnJvckVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlkIiwidGVzdCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiYWRkIiwicXVlcnlTZWxlY3RvckFsbCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImJ0bkVsZW1lbnQiLCJpc1ZhbGlkIiwiZm9ybUVsZW1lbnQiLCJpbnB1dHNMaXN0IiwiQXJyYXkiLCJmcm9tIiwidG9nZ2xlQnRuU3RhdGUiLCJpbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzd2l0Y2hpbmdJbnB1dCIsImNhcmRzQ29udGFpbmVyIiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJwaG90b0hhbmRsZXIiLCJkZWxldGVIYW5kbGVyIiwiX25hbWUiLCJfbGluayIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfcGhvdG9IYW5kbGVyIiwiX2RlbGV0ZUhhbmRsZXIiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRFbGVtZW50IiwiZ2V0VGVtcGxhdGUiLCJsZW5ndGgiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlT3BlblBvcHVwIiwiX2hhbmRsZUNsb3NlUG9wdXAiLCJ0b2dnbGUiLCJjb250YWlucyIsImFkZExpa2UiLCJsaWtlc2luaXRBcnJheSIsImRlbGV0ZUxpa2UiLCJjbG9zZXN0IiwiUG9wdXAiLCJwb3B1cCIsIl9wb3B1cCIsIl9mb3JtIiwicHJldmVudERlZmF1bHQiLCJjbG9zZSIsIm9wZW5CdXR0b24iLCJfdGhpczIiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIl9waG90byIsIl9jYXB0aW9uIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXRIYW5kbGVyIiwiX2Zvcm1TdWJtaXRIYW5kbGVyIiwicmVzZXQiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJfaW5wdXRMaXN0IiwiZm9ybVZhbHVlcyIsIl90aGlzMyIsImdldElucHV0VmFsdWVzIiwiZm9ybXMiLCJwbGFjZSIsImlzTG9hZGluZyIsInVzZXJJbmZvIiwiX3VzZXJOYW1lIiwiX3VzZXJBYm91dE1lIiwiUG9wdXBDb25maXJtYXRpb24iLCJzdWJtaXRIYW5kbGVyIiwiX3N1Ym1pdEhhbmRsZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZGVmYXVsdFByb2ZpbGUiLCJmb3JtUG9wdXBQcm9maWxlIiwicmVuZGVyTG9hZGluZyIsImVkaXRQcm9maWxlIiwidXNlciIsInNldFVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJyZW5kZXJQcm9maWxlSW5mbyIsImZpbmFsbHkiLCJzZXRFdmVudExpc3RlbmVycyIsImZvcm1Qb3B1cFBsYWNlIiwiYWRkZWRDYXJkc0FycmF5IiwiY2FyZHNBZGRlZFJlcXVlc3QiLCJkYXRhQXJyYXkiLCJwdXNoIiwiZGVmYXVsdENhcmRMaXN0IiwiY2FyZCIsImNvbmZpcm1hdGlvbiIsImRlbGV0ZUNhcmQiLCJ0cmFzaEJ0bkZ1bmN0aW9ucyIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsInJlbmRlckNhcmRzIiwiYWRkTmV3Q2FyZFBldGl0aW9uIiwicmVzdWx0IiwiYXBpQ2FyZCIsInN1Ym1pdEZ1bmN0aW9ucyIsIm5ld1BwZGF0ZUF2YXRhciIsInVwZGF0ZUF2YXRhciIsImF2YXRhclVybCJdLCJzb3VyY2VSb290IjoiIn0=