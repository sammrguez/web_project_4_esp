!function(){"use strict";const e=document.querySelector(".edit-button"),t=(document.querySelector(".form__submit-button"),document.querySelector(".form__close-button"),document.querySelector(".popup_type_edit-profile")),o=document.querySelector(".profile__user-name"),r=document.querySelector(".profile__user-profession"),s=document.querySelector(".profile__avatar"),n=(document.querySelector("#name-input"),document.querySelector("#about-me-input"),document.querySelector(".add-button")),a=(document.querySelector(".form__close-button_type_new-place"),document.querySelector(".popup_type_new-place")),i=document.querySelector(".form__submit-button_place"),c=(document.querySelector(".card-container"),document.querySelector(".popup_type_photo")),l=document.querySelector(".popup__photo"),u=document.querySelector(".popup__photo-caption"),p=document.querySelector(".popup__close-button");class m{constructor({items:e,renderer:t},o){this._itemsArray=e,this._renderer=t,this._container=o}addItem(e){this._container.append(e)}renderItems(){this._itemsArray.forEach((e=>{this._renderer(e)}))}test(){console.log(this._itemsArray)}}const _=/^[A-Za-z\-]{2,100}$/,d=/^[A-Za-z\-]{2,20}$/,h=/^[A-Za-z\-]{4,20}$/,S=/^[A-Za-z\-]{4,500}$/;class f{constructor(e){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}switchingInput(e){switch(e.target.name){case"name":this._checkInputValidity(_,e.target,this._formSelector);break;case" aboutMe":this._checkInputValidity(d,e.target,this._formSelector);break;case"placeName":this._checkInputValidity(h,e.target,this._formSelector);break;case"link":this._checkInputValidity(S,e.target,this._formSelector)}}_checkInputValidity(e,t,o){const r=document.getElementById(o).querySelector(`.${t.id}-error`);e.test(t.value)?(r.classList.remove(this._errorClass),r.textContent="",t.classList.remove(this._inputErrorClass)):(r.textContent=t.validationMessage,r.classList.add(this._errorClass),t.classList.add(this._inputErrorClass))}isValid(e){let t="";const o=document.getElementById(e);return t=!!Array.from(o.querySelectorAll(this._inputSelector)).every((e=>e.validity.valid)),t}toggleBtnState(e){const t=document.getElementById(e).querySelector(this._submitButtonSelector);!0===this.isValid(e)?t.classList.remove(this._inactiveButtonClass):t.classList.add(this._inactiveButtonClass)}enableValidation(){const e=document.getElementById(this._formSelector),t=Array.from(e.querySelectorAll(this._inputSelector));this.toggleBtnState(this._formSelector),t.forEach((e=>{e.addEventListener("input",(e=>{this.switchingInput(e),this.toggleBtnState(this._formSelector)}))}))}test(){const e=document.getElementById(this._formSelector).querySelector(`.${evt.target.id}-error`);console.log(e)}}const y=document.querySelector(".card-container");class v{constructor({data:e,photoHandler:t},o){this._name=e.placeName,this._link=e.link,this._templateSelector=o,this._photoHandler=t}getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".place-card").cloneNode(!0)}generateCard(){this._cardElement=this.getTemplate(),this._cardElement.querySelector(".place-card__name").textContent=this._name,this._cardElement.querySelector(".place-card__photo").src=this._link,this._setEventListeners();const e=this._cardElement.querySelector(".trash-button");return e.addEventListener("click",(()=>{e.closest(".place-card").remove()})),this._cardElement.querySelector(".like-button").addEventListener("click",(function(e){e.target.classList.toggle("like-button_active")})),this._cardElement}_handleOpenPopup(){this._photoHandler(this._link,this._name)}_handleClosePopup(){l.src=" ",u.textContent=" ",c.classList.remove("popup_opened")}_setEventListeners(){this._cardElement.querySelector(".place-card__photo").addEventListener("click",(()=>{this._handleOpenPopup()})),p.addEventListener("click",(()=>{this._handleClosePopup()}))}test(){this.generateCard()}}class E{constructor(e){this._popup=e,this._form=e.querySelector(".form")}open(){this._popup.classList.add("popup_opened")}close(){this._popup.classList.remove("popup_opened")}_handleEscClose(){document.addEventListener("keydown",(e=>{e.preventDefault,"Escape"===e.key&&this.close()}))}setEventListeners(e){e.addEventListener("click",(()=>{this.open()})),this._handleEscClose(),this._form.querySelector(".form__close-button").addEventListener("click",(e=>{e.preventDefault(),this.close()}))}}class b extends E{constructor(e){super(e)}open(e,t){super.open(),this._photo=document.querySelector(".popup__photo").src=e,this._caption=document.querySelector(".popup__photo-caption").textContent=t}test(){console.log("desde test de popimage")}}class g extends E{constructor({formSubmitHandler:e},t){super(t),this._formSubmitHandler=e,this._form=this._popup.querySelector(".form")}close(){super.close(),"place"==this._form.id&&this._form.reset(),this._popup.querySelector(".overlay").addEventListener("click",(e=>{this._popup.classList.remove("popup_opened"),e.stopImmediatePropagation()}))}getInputValues(){this._inputList=this._form.querySelectorAll(".form__input");const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(e){this.getInputValues(),super.setEventListeners(e),this._form.addEventListener("submit",(e=>{e.preventDefault(),e.stopImmediatePropagation(),this._formSubmitHandler(this.getInputValues()),this.close(),document.forms.place.reset()}))}}class C{constructor({data:e}){this._userName=e.name,this._userAboutMe=e["about-me"]}getUserInfo(){this._userName=o.textContent,this._userAboutMe=r.textContent}setUserInfo(){o.textContent=this._userName,r.textContent=this._userAboutMe}}new f({formSelector:"profile",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}).enableValidation(),new f({formSelector:"place",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}).enableValidation();const k=new m({items:[{placeName:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{placeName:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{placeName:"MontaÃ±as Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{placeName:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{placeName:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{placeName:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],renderer:e=>{const t=new v({data:e,photoHandler:(e,t)=>{new b(c).open(e,t)}},"#card-template").generateCard();k.addItem(t)}},y);k.renderItems(),new g({formSubmitHandler:e=>{const t=new C({data:e});t.setUserInfo(),t.getUserInfo()}},t).setEventListeners(e),new g({formSubmitHandler:e=>{const t=e,o=[];o.push(t),i.classList.add("form__submit-button_inactive");const r=new m({items:o,renderer:e=>{const t=new v({data:e,photoHandler:(e,t)=>{new b(c).open(e,t)}},"#card-template").generateCard();r.addItem(t)}},y);r.renderItems()}},a).setEventListeners(n,".form__submit-button_place"),fetch("https://around.nomoreparties.co/v1/web_es_07/users/me ",{headers:{authorization:"d73ff8a4-5ad7-42cb-999c-d084ca2e6847"}}).then((e=>e.ok?e.json():Promise.reject(e.status))).then((e=>{var t;t=e,o.textContent=t.name,r.textContent=t.about,s.src=t.avatar,console.log("todo ok")})).then((e=>{o.textContent=e.name,r.textContent=e.about,s.src=e.avatar})).catch((e=>{console.log(`Error: ${e}`)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SEcsRUFBS0osYUFBdkIsR0FHSjdILEdBRW9DMEcsa0JBQWtCN0csR0FHakMsSUFBSW1ILEVBQ3pCLENBQ0VDLGtCQUFvQnJDLElBQ2xCLE1BQU1zRCxFQUFVdEQsRUFFVnVELEVBQWdCLEdBRXRCQSxFQUFjQyxLQUFLRixHQUNuQjVILEVBQWtCaUQsVUFBVUksSUFBSSxnQ0FDaEMsTUFBTTBFLEVBQWUsSUFBSTFILEVBQ3ZCLENBQ0VFLE1BQU9zSCxFQUNQckgsU0FBVzhELElBQ1QsTUFVTW9ELEVBVlksSUFBSXJELEVBQ3BCLENBQ0VDLEtBQU1BLEVBQ05DLGFBQWMsQ0FBQ2EsRUFBSzVDLEtBQ0osSUFBSThELEVBQWVyRyxHQUNWOEYsS0FBS1gsRUFBSzVDLEVBQWpDLEdBR0osa0JBRXdCMEMsZUFDMUI2QyxFQUFhakgsUUFBUTRHLEVBQXJCLEdBR0p0RCxHQUVGMkQsRUFBYTlHLGFBQWIsR0FHSmxCLEdBRWFxRyxrQkFBa0J0RyxFQUFnQiw4QkFVakRrSSxNQUFNLHlEQUEwRCxDQUM5REMsUUFBUyxDQUNQQyxjQUFlLDBDQUdoQkMsTUFBTUMsR0FDREEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBT0osRUFBSUssVUFFM0JOLE1BQU1DLElBakJULElBQXVCTSxJQWtCTE4sRUFqQmhCekksRUFBU3dELFlBQWN1RixFQUFTbEcsS0FDaEM1QyxFQUFZdUQsWUFBY3VGLEVBQVNDLE1BQ25DOUksRUFBV3VGLElBQU1zRCxFQUFTRSxPQWdCeEJ4SCxRQUFRQyxJQUFJLFVBQVosSUFFRDhHLE1BQU1DLElBQ0x6SSxFQUFTd0QsWUFBY2lGLEVBQUk1RixLQUMzQjVDLEVBQVl1RCxZQUFjaUYsRUFBSU8sTUFDOUI5SSxFQUFXdUYsSUFBTWdELEVBQUlRLE1BQXJCLElBR0RDLE9BQU9DLElBQ04xSCxRQUFRQyxJQUFLLFVBQVN5SCxJQUF0QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L3V0aWxzL0RhdGEuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL3NjcmlwdC9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIHBsYWNlTmFtZTogXCJWYWxsZSBkZSBZb3NlbWl0ZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHBsYWNlTmFtZTogXCJMYWdvIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHBsYWNlTmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgcGxhY2VOYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHBsYWNlTmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgcGxhY2VOYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuLy9jb25zdGFudGVzIHVuaXZlcnNhbGVzXHJcbmV4cG9ydCBjb25zdCBidG5FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBidG5DcmVhdGVQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zdWJtaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYnRuQ2xvc2VFZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV9fY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX191c2VyLW5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCB1c2VyQWJvdXRNZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdXNlci1wcm9mZXNzaW9uXCIpO1xyXG5leHBvcnQgY29uc3QgdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgdXNlck5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJQcm9mZXNzaW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Fib3V0LW1lLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3QgYnRuQWRkTmV3UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBidG5DbG9zZU5ld1BsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5mb3JtX19jbG9zZS1idXR0b25fdHlwZV9uZXctcGxhY2VcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBZGROZXdQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9uZXctcGxhY2VcIik7XHJcbmV4cG9ydCBjb25zdCBidG5TdWJtaXROZXdQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV9fc3VibWl0LWJ1dHRvbl9wbGFjZVwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtY29udGFpbmVyXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBQaG90byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9waG90b1wiKTtcclxuXHJcbi8vcG9wdXAgcGhvdG9cclxuZXhwb3J0IGNvbnN0IGxpbmtQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3Bob3RvXCIpO1xyXG5leHBvcnQgY29uc3QgY2FwdGlvblBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGhvdG8tY2FwdGlvblwiKTtcclxuZXhwb3J0IGNvbnN0IGJ0bkNsb3NlUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIik7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtc0FycmF5ID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChpdGVtKTtcclxuICB9XHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtc0FycmF5LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgdGVzdCgpIHtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuX2l0ZW1zQXJyYXkpO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCByZWdFeCA9IHtcclxuICBuYW1lOiAvXltBLVphLXpcXC1dezIsMTAwfSQvLFxyXG4gIGFib3V0TWU6IC9eW0EtWmEtelxcLV17MiwyMH0kLyxcclxuICBwbGFjZU5hbWU6IC9eW0EtWmEtelxcLV17NCwyMH0kLyxcclxuICBsaW5rOiAvXltBLVphLXpcXC1dezQsNTAwfSQvLFxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKG9ialRvVmFsaWRhdGUpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IG9ialRvVmFsaWRhdGUuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9ialRvVmFsaWRhdGUuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb2JqVG9WYWxpZGF0ZS5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvYmpUb1ZhbGlkYXRlLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvYmpUb1ZhbGlkYXRlLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvYmpUb1ZhbGlkYXRlLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG4gIC8vdGVybWluYSBlbCBjb25zdHJ1Y3RvclxyXG4gIHN3aXRjaGluZ0lucHV0KGV2dCkge1xyXG4gICAgc3dpdGNoIChldnQudGFyZ2V0Lm5hbWUpIHtcclxuICAgICAgY2FzZSBcIm5hbWVcIjpcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkocmVnRXgubmFtZSwgZXZ0LnRhcmdldCwgdGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnJvckVsZW1lbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiIGFib3V0TWVcIjpcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkocmVnRXguYWJvdXRNZSwgZXZ0LnRhcmdldCwgdGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnJvckVsZW1lbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwicGxhY2VOYW1lXCI6XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KFxyXG4gICAgICAgICAgcmVnRXgucGxhY2VOYW1lLFxyXG4gICAgICAgICAgZXZ0LnRhcmdldCxcclxuICAgICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvclxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhlcnJvckVsZW1lbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwibGlua1wiOlxyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShyZWdFeC5saW5rLCBldnQudGFyZ2V0LCB0aGlzLl9mb3JtU2VsZWN0b3IpO1xyXG5cclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShleHByZXNpb24sIGlucHV0RWxlbWVudCwgZm9ybUlEKSB7XHJcbiAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcm1JRCk7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgaWYgKGV4cHJlc2lvbi50ZXN0KGlucHV0RWxlbWVudC52YWx1ZSkpIHtcclxuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcblxyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8gdGVybWluYSBjaGVjayBzaG93IGVycm9yXHJcbiAgLy8gaXMgdmFsaWRcclxuXHJcbiAgaXNWYWxpZChmb3JtSUQpIHtcclxuICAgIGxldCB2YWxpZCA9IFwiXCI7XHJcbiAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcm1JRCk7XHJcbiAgICBjb25zdCBpbnB1dHNMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIGlucHV0c0xpc3QuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgIH0pXHJcbiAgICApIHtcclxuICAgICAgdmFsaWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWxpZDtcclxuICB9XHJcblxyXG4gIC8vIHRvZ2dsZUJ0blxyXG4gIHRvZ2dsZUJ0blN0YXRlKGZvcm1JRCkge1xyXG4gICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmb3JtSUQpO1xyXG4gICAgY29uc3QgYnRuRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzVmFsaWQoZm9ybUlEKSA9PT0gdHJ1ZSkge1xyXG4gICAgICBidG5FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidG5FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL3BydWViYSBlbmFibGUgdmFsaWRhdGlvblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XHJcblxyXG4gICAgY29uc3QgaW5wdXRzTGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLnRvZ2dsZUJ0blN0YXRlKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XHJcbiAgICBpbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hpbmdJbnB1dChldnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnRuU3RhdGUodGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRlc3QoKSB7XHJcbiAgICBjb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XHJcblxyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7ZXZ0LnRhcmdldC5pZH0tZXJyb3JgKTtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yRWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbi8vdGVybWluYSBvYmpldG9cclxuLy8gIHBydWViYSBQYXJhIFByb2ZpbGUgZm9ybVxyXG5cclxuLy9Qcm95ZWN0byA4XHJcbiIsImltcG9ydCB7XHJcbiAgcG9wdXBQaG90byxcclxuICBsaW5rUG9wdXAsXHJcbiAgY2FwdGlvblBvcHVwLFxyXG4gIGJ0bkNsb3NlUGhvdG8sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL0RhdGEuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtY29udGFpbmVyXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcGhvdG9IYW5kbGVyIH0sIHRlbXBsYXRlU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLnBsYWNlTmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX3Bob3RvSGFuZGxlciA9IHBob3RvSGFuZGxlcjtcclxuICB9XHJcbiAgZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQ7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wbGFjZS1jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZS1jYXJkX19uYW1lXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2UtY2FyZF9fcGhvdG9cIikuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgY29uc3QgdHJhc2hCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRyYXNoLWJ1dHRvblwiKTtcclxuICAgIHRyYXNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRUb1JlbW92ZSA9IHRyYXNoQnRuLmNsb3Nlc3QoXCIucGxhY2UtY2FyZFwiKTtcclxuICAgICAgY2FyZFRvUmVtb3ZlLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBsaWtlSWNvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGlrZS1idXR0b25cIik7XHJcbiAgICBsaWtlSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJsaWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlT3BlblBvcHVwKCkge1xyXG4gICAgdGhpcy5fcGhvdG9IYW5kbGVyKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsb3NlUG9wdXAoKSB7XHJcbiAgICBsaW5rUG9wdXAuc3JjID0gXCIgXCI7XHJcbiAgICBjYXB0aW9uUG9wdXAudGV4dENvbnRlbnQgPSBcIiBcIjtcclxuICAgIHBvcHVwUGhvdG8uY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlLWNhcmRfX3Bob3RvXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZU9wZW5Qb3B1cCgpO1xyXG4gICAgICB9KTtcclxuICAgIGJ0bkNsb3NlUGhvdG8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2xvc2VQb3B1cCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHRlc3QoKSB7XHJcbiAgICB0aGlzLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHRoaXMuX3BvcHVwID0gcG9wdXA7XHJcbiAgICB0aGlzLl9mb3JtID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdDtcclxuICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycyhvcGVuQnV0dG9uKSB7XHJcbiAgICBvcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMub3BlbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5mb3JtX19jbG9zZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy8gcG9wdXAgd2l0aCBpbWFnZVxyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICB9XHJcbiAgb3BlbihzcmMsIG5hbWUpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX3Bob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGhvdG9cIikuc3JjID0gc3JjO1xyXG5cclxuICAgIHRoaXMuX2NhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9fcGhvdG8tY2FwdGlvblwiXHJcbiAgICApLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcbiAgdGVzdCgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiZGVzZGUgdGVzdCBkZSBwb3BpbWFnZVwiKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBmb3JtU3VibWl0SGFuZGxlciB9LCBwb3B1cCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5fZm9ybVN1Ym1pdEhhbmRsZXIgPSBmb3JtU3VibWl0SGFuZGxlcjtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICBpZiAodGhpcy5fZm9ybS5pZCA9PSBcInBsYWNlXCIpIHtcclxuICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICAgIGV2dC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMob3BlbkJ1dHRvbikge1xyXG4gICAgdGhpcy5nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMob3BlbkJ1dHRvbik7XHJcblxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGV2dC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgdGhpcy5fZm9ybVN1Ym1pdEhhbmRsZXIodGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICBkb2N1bWVudC5mb3Jtcy5wbGFjZS5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IHVzZXJOYW1lLCB1c2VyQWJvdXRNZSB9IGZyb20gXCIuLi91dGlscy9EYXRhLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEgfSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl91c2VyQWJvdXRNZSA9IGRhdGFbXCJhYm91dC1tZVwiXTtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5fdXNlckFib3V0TWUgPSB1c2VyQWJvdXRNZS50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKCkge1xyXG4gICAgdXNlck5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl91c2VyTmFtZTtcclxuICAgIHVzZXJBYm91dE1lLnRleHRDb250ZW50ID0gdGhpcy5fdXNlckFib3V0TWU7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQge1xyXG4gIGJ0bkVkaXRQcm9maWxlLFxyXG4gIHBvcHVwRWRpdFByb2ZpbGUsXHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHBvcHVwUGhvdG8sXHJcbiAgcG9wdXBBZGROZXdQbGFjZSxcclxuICBidG5BZGROZXdQbGFjZSxcclxuICBidG5TdWJtaXROZXdQbGFjZSxcclxuICB1c2VyQXZhdGFyLFxyXG4gIHVzZXJOYW1lLFxyXG4gIHVzZXJBYm91dE1lLFxyXG59IGZyb20gXCIuL3NjcmlwdC91dGlscy9EYXRhLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL3NjcmlwdC9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuXHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi9zY3JpcHQvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IENhcmQsIGNhcmRzQ29udGFpbmVyIH0gZnJvbSBcIi4vc2NyaXB0L2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vc2NyaXB0L2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vc2NyaXB0L2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgdXNlckluZm8gZnJvbSBcIi4vc2NyaXB0L2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuXHJcbi8vIG9iamV0b3MgcGFyYSB2YWxpZGFyXHJcbmNvbnN0IHZhbGlkYXRpb25PYmplY3QgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcInByb2ZpbGVcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuY29uc3QgdmFsaWRhdGlvbk9iamVjdDIgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcInBsYWNlXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuLy9sbGFtYW5kbyBhIEZvcm1WYWxpZGF0b3JcclxuY29uc3QgUHJvZmlsZVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uT2JqZWN0KTtcclxuY29uc3QgdGVzdCA9IFByb2ZpbGVWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuLy9wcnVlYmEgcGFyYSBwbGFjZSBmb3JtXHJcbmNvbnN0IFBsYWNlVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25PYmplY3QyKTtcclxuY29uc3QgdGVzdDIgPSBQbGFjZVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gUG9yeWVjdG8gOVxyXG5cclxuY29uc3QgZGVmYXVsdENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGF0YTogaXRlbSxcclxuICAgICAgICAgIHBob3RvSGFuZGxlcjogKHNyYywgbmFtZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwaG90byA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cFBob3RvKTtcclxuICAgICAgICAgICAgY29uc3QgbmV3UGhvdG8gPSBwaG90by5vcGVuKHNyYywgbmFtZSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCIjY2FyZC10ZW1wbGF0ZVwiXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICBkZWZhdWx0Q2FyZExpc3QuYWRkSXRlbShuZXdDYXJkKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjYXJkc0NvbnRhaW5lclxyXG4pO1xyXG5kZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vcG9wdXAgZm9ybSBwcm9maWxlXHJcbmNvbnN0IGZvcm1Qb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBmb3JtU3VibWl0SGFuZGxlcjogKGRhdGEpID0+IHtcclxuICAgICAgLy8gYXF1aSBlbXBpZXphIGNhbGxiYWNrXHJcblxyXG4gICAgICBjb25zdCB1c2VyID0gbmV3IHVzZXJJbmZvKHsgZGF0YTogZGF0YSB9KTtcclxuICAgICAgY29uc3QgbmV3VXNlciA9IHVzZXIuc2V0VXNlckluZm8oKTtcclxuICAgICAgY29uc3QgcmVzZXRVc2VyID0gdXNlci5nZXRVc2VySW5mbygpO1xyXG4gICAgfSwgLy9hcXVpIHRlcm1pbmNrXHJcbiAgfSxcclxuICBwb3B1cEVkaXRQcm9maWxlXHJcbik7XHJcbmNvbnN0IG5ld0Zvcm1Qb3B1cCA9IGZvcm1Qb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoYnRuRWRpdFByb2ZpbGUpO1xyXG5cclxuLy8gIHBvcHVwIGZvcm0gcGxhY2VcclxuY29uc3QgZm9ybVBvcHVwUGxhY2UgPSBuZXcgUG9wdXBXaXRoRm9ybSggLy8gZGVjbGFyYW5kbyBmb3JtXHJcbiAge1xyXG4gICAgZm9ybVN1Ym1pdEhhbmRsZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld0l0ZW0gPSBkYXRhO1xyXG5cclxuICAgICAgY29uc3QgYWRkZWRDYXJkTGlzdCA9IFtdO1xyXG5cclxuICAgICAgYWRkZWRDYXJkTGlzdC5wdXNoKG5ld0l0ZW0pO1xyXG4gICAgICBidG5TdWJtaXROZXdQbGFjZS5jbGFzc0xpc3QuYWRkKFwiZm9ybV9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiKTtcclxuICAgICAgY29uc3QgaW5wdXRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaXRlbXM6IGFkZGVkQ2FyZExpc3QsXHJcbiAgICAgICAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRDYXJkID0gbmV3IENhcmQoXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgICAgIHBob3RvSGFuZGxlcjogKHNyYywgbmFtZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBwaG90byA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cFBob3RvKTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGhvdG8gPSBwaG90by5vcGVuKHNyYywgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgXCIjY2FyZC10ZW1wbGF0ZVwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0NhcmQgPSBpbnB1dENhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgICAgICAgIGlucHV0U2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhcmRzQ29udGFpbmVyXHJcbiAgICAgICk7XHJcbiAgICAgIGlucHV0U2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHBvcHVwQWRkTmV3UGxhY2VcclxuKTtcclxuZm9ybVBvcHVwUGxhY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoYnRuQWRkTmV3UGxhY2UsIFwiLmZvcm1fX3N1Ym1pdC1idXR0b25fcGxhY2VcIik7IC8vIHNlIGFjY2lvbmEgIHBvcHVvcCB3aXRoIGZvcm1cclxuXHJcbi8vUHJveWVjdG8gMTBcclxuLy9yZW5kZXJQcm9maWxlXHJcbmZ1bmN0aW9uIHJlbmRlclJlc3VsdHModXNlckRhdGEpIHtcclxuICB1c2VyTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgdXNlckFib3V0TWUudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcclxuICB1c2VyQXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcclxufVxyXG5cclxuZmV0Y2goXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc18wNy91c2Vycy9tZSBcIiwge1xyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZDczZmY4YTQtNWFkNy00MmNiLTk5OWMtZDA4NGNhMmU2ODQ3XCIsXHJcbiAgfSxcclxufSlcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gIH0pXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgcmVuZGVyUmVzdWx0cyhyZXMpO1xyXG4gICAgY29uc29sZS5sb2coXCJ0b2RvIG9rXCIpO1xyXG4gIH0pXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgdXNlck5hbWUudGV4dENvbnRlbnQgPSByZXMubmFtZTtcclxuICAgIHVzZXJBYm91dE1lLnRleHRDb250ZW50ID0gcmVzLmFib3V0O1xyXG4gICAgdXNlckF2YXRhci5zcmMgPSByZXMuYXZhdGFyO1xyXG4gIH0pXHJcblxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcclxuICB9KTtcclxuIl0sIm5hbWVzIjpbImJ0bkVkaXRQcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBFZGl0UHJvZmlsZSIsInVzZXJOYW1lIiwidXNlckFib3V0TWUiLCJ1c2VyQXZhdGFyIiwiYnRuQWRkTmV3UGxhY2UiLCJwb3B1cEFkZE5ld1BsYWNlIiwiYnRuU3VibWl0TmV3UGxhY2UiLCJwb3B1cFBob3RvIiwibGlua1BvcHVwIiwiY2FwdGlvblBvcHVwIiwiYnRuQ2xvc2VQaG90byIsIlNlY3Rpb24iLCJjb25zdHJ1Y3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsInRoaXMiLCJfaXRlbXNBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiaXRlbSIsImFwcGVuZCIsInJlbmRlckl0ZW1zIiwiZm9yRWFjaCIsInRlc3QiLCJjb25zb2xlIiwibG9nIiwicmVnRXgiLCJGb3JtVmFsaWRhdG9yIiwib2JqVG9WYWxpZGF0ZSIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJzd2l0Y2hpbmdJbnB1dCIsImV2dCIsInRhcmdldCIsIm5hbWUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXhwcmVzaW9uIiwiaW5wdXRFbGVtZW50IiwiZm9ybUlEIiwiZXJyb3JFbGVtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpZCIsInZhbHVlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImFkZCIsImlzVmFsaWQiLCJ2YWxpZCIsImZvcm1FbGVtZW50IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ0b2dnbGVCdG5TdGF0ZSIsImJ0bkVsZW1lbnQiLCJlbmFibGVWYWxpZGF0aW9uIiwiaW5wdXRzTGlzdCIsImlucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhcmRzQ29udGFpbmVyIiwiQ2FyZCIsImRhdGEiLCJwaG90b0hhbmRsZXIiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiX25hbWUiLCJwbGFjZU5hbWUiLCJfbGluayIsImxpbmsiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9waG90b0hhbmRsZXIiLCJnZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJzcmMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0cmFzaEJ0biIsImNsb3Nlc3QiLCJ0b2dnbGUiLCJfaGFuZGxlT3BlblBvcHVwIiwiX2hhbmRsZUNsb3NlUG9wdXAiLCJQb3B1cCIsInBvcHVwIiwiX3BvcHVwIiwiX2Zvcm0iLCJvcGVuIiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJwcmV2ZW50RGVmYXVsdCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwib3BlbkJ1dHRvbiIsIlBvcHVwV2l0aEltYWdlIiwic3VwZXIiLCJfcGhvdG8iLCJfY2FwdGlvbiIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU3VibWl0SGFuZGxlciIsIl9mb3JtU3VibWl0SGFuZGxlciIsInJlc2V0Iiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwiZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRMaXN0IiwiZm9ybVZhbHVlcyIsImZvcm1zIiwicGxhY2UiLCJ1c2VySW5mbyIsIl91c2VyTmFtZSIsIl91c2VyQWJvdXRNZSIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJkZWZhdWx0Q2FyZExpc3QiLCJuZXdDYXJkIiwidXNlciIsIm5ld0l0ZW0iLCJhZGRlZENhcmRMaXN0IiwicHVzaCIsImlucHV0U2VjdGlvbiIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInVzZXJEYXRhIiwiYWJvdXQiLCJhdmF0YXIiLCJjYXRjaCIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==