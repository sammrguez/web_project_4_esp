!function(){"use strict";const e=new class{constructor({baseUrl:e,headers:t}){this._baseUrl=e,this._headers=t,this._authorization=t.authorization}renderResults(e){r.textContent=e.name,n.textContent=e.about,s.src=e.avatar}defaultProfile(){return fetch(`${this._baseUrl}/users/me`,{headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(e.status))).then((e=>{this.renderResults(e)})).catch((e=>{console.log(`Error: ${e}`)}))}editProfile(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{authorization:this._authorization,"content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((e=>e.ok?(console.log("todo ok"),e.json()):Promise.reject(e.status))).then((e=>{console.log(e)})).catch((e=>{console.log(`Error: ${e}`)}))}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:{authorization:this._authorization,"content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then((e=>e.ok?(console.log("todo ok"),e.json()):Promise.reject(e.status))).catch((e=>{console.log(`Error: ${e}`)}))}addLike(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:{authorization:this._authorization,"content-Type":"application/json"},body:JSON.stringify({name:profile.name,about:profile.about})}).then((e=>e.ok?(console.log("todo ok"),e.json()):Promise.reject(e.status))).catch((e=>{console.log(`Error: ${e}`)}))}deleteLike(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:{authorization:this._authorization,"content-Type":"application/json"},body:JSON.stringify({name:profile.name,about:profile.about})}).then((e=>e.ok?(console.log("todo ok"),e.json()):Promise.reject(e.status))).catch((e=>{console.log(`Error: ${e}`)}))}cardsAddedRequest(){return fetch(`${this._baseUrl}/cards`,{headers:{authorization:this._authorization}})}addNewCardPetition(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{authorization:this._authorization,"content-Type":"application/json"},body:JSON.stringify({name:e.placeName,link:e.link})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{console.log(`Error: ${e}`)}))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:{authorization:this._authorization,"content-Type":"application/json"}}).then((e=>e.ok?(console.log("todo ok"),e.json()):Promise.reject(e.status))).catch((e=>{console.log(`Error: ${e}`)}))}returnCardInfo(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"GET",headers:{authorization:this._authorization}}).then((e=>e.ok?(console.log("todo ok"),e.json()):Promise.reject(e.status))).catch((e=>{console.log(`Error: ${e}`)}))}}({baseUrl:"https://around.nomoreparties.co/v1/web_es_07/",headers:{authorization:"d73ff8a4-5ad7-42cb-999c-d084ca2e6847","content-Type":"application/json"}}),t=document.querySelector(".edit-button"),o=(document.querySelector(".form__submit-button"),document.querySelector(".form__close-button"),document.querySelector(".popup_type_edit-profile")),r=document.querySelector(".profile__user-name"),n=document.querySelector(".profile__user-profession"),s=document.querySelector(".profile__avatar"),i=(document.querySelector("#name-input"),document.querySelector("#about-me-input"),document.querySelector(".add-button")),a=(document.querySelector(".form__close-button_type_new-place"),document.querySelector(".popup_type_new-place")),c=(document.querySelector(".form__submit-button_place"),document.querySelector(".card-container"),document.querySelector(".popup_type_photo")),l=document.querySelector(".popup__photo"),u=document.querySelector(".popup__photo-caption"),d=document.querySelector(".popup__close-button"),h=document.querySelector(".form__submit-button_delete"),p=document.querySelector(".popup_type_delete"),_=document.querySelector(".form__close-button_type_delete"),m=document.querySelector(".popup_type_update-avatar"),f=document.querySelector(".profile__avatar-overlay"),y=document.querySelector(".profile__avatar");class b{constructor({items:e,renderer:t},o){this._itemsArray=e,this._renderer=t,this._container=o}addItem(e){this._container.prepend(e)}renderItems(){this._itemsArray.forEach((e=>{this._renderer(e)}))}}const S=/^[A-Za-z\-]{2,100}$/,v=/^[A-Za-z\-]{2,20}$/,g=/^[A-Za-z\-]{3,20}$/,E=/^[A-Za-z\-]{4,500}$/,k=/^[A-Za-z\-]{4,500}$/;class q{constructor(e){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}switchingInput(e){switch(e.target.name){case"name":this._checkInputValidity(S,e.target,this._formSelector);break;case" aboutMe":this._checkInputValidity(v,e.target,this._formSelector);break;case"placeName":this._checkInputValidity(g,e.target,this._formSelector);break;case"link":this._checkInputValidity(E,e.target,this._formSelector);break;case"updateAvatar":this._checkInputValidity(k,e.target,this._formSelector)}}_checkInputValidity(e,t,o){const r=document.getElementById(o).querySelector(`.${t.id}-error`);e.test(t.value)?(r.classList.remove(this._errorClass),t.classList.remove(this._inputErrorClass),r.textContent=""):(r.textContent=t.validationMessage,r.classList.add(this._errorClass),t.classList.add(this._inputErrorClass))}isValid(e){let t="";const o=document.getElementById(e);return t=!!Array.from(o.querySelectorAll(this._inputSelector)).every((e=>e.validity.valid)),t}toggleBtnState(e){const t=document.getElementById(e).querySelector(this._submitButtonSelector);!0===this.isValid(e)?t.classList.remove(this._inactiveButtonClass):t.classList.add(this._inactiveButtonClass)}enableValidation(){const e=document.getElementById(this._formSelector),t=Array.from(e.querySelectorAll(this._inputSelector));this.toggleBtnState(this._formSelector),t.forEach((e=>{e.addEventListener("input",(e=>{this.switchingInput(e),this.toggleBtnState(this._formSelector)}))}))}}const C=document.querySelector(".card-container");class L{constructor({data:e,photoHandler:t,deleteHandler:o},r){this._name=e.name,this._link=e.link,this._id=e._id,this._likes=e.likes,this._templateSelector=r,this._photoHandler=t,this._deleteHandler=o,this._likes=e.likes}getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".place-card").cloneNode(!0)}generateCard(){return this._cardElement=this.getTemplate(),this._cardElement.querySelector(".place-card__name").textContent=this._name,this._cardElement.querySelector(".place-card__photo").src=this._link,this._cardElement.id=this._id,this._cardElement.querySelector(".like-button-counter").textContent=this._likes.length,this._setEventListeners(),this._cardElement}_handleOpenPopup(){this._photoHandler(this._link,this._name)}_handleClosePopup(){l.src=" ",u.textContent=" ",c.classList.remove("popup_opened")}likeadding(){}_setEventListeners(){this._cardElement.querySelector(".place-card__photo").addEventListener("click",(()=>{this._handleOpenPopup()})),d.addEventListener("click",(()=>{this._handleClosePopup()})),this._cardElement.querySelector(".trash-button").addEventListener("click",(e=>{this._deleteHandler(this._cardElement.id)})),this._cardElement.querySelector(".like-button").addEventListener("click",(t=>{t.target.classList.toggle("like-button_active"),t.target.classList.contains("like-button_active")?e.addLike(this._cardElement.id).then((e=>{let t=e.likes;this._cardElement.querySelector(".like-button-counter").textContent=t.length})):e.deleteLike(this._cardElement.id).then((e=>{console.log(e);const t=e.likes;this._cardElement.querySelector(".like-button-counter").textContent=t.length}))}))}trashBtnFunctions(){this._cardElement.querySelector(".trash-button").closest(".place-card").remove()}test(){console.log(this._id)}}class ${constructor(e){this._popup=e,this._form=e.querySelector(".form")}open(){this._popup.classList.add("popup_opened")}close(){this._popup.classList.remove("popup_opened")}_handleEscClose(){document.addEventListener("keydown",(e=>{e.preventDefault,"Escape"===e.key&&this.close()}))}setEventListeners(e){e.addEventListener("click",(()=>{this.open()})),this._handleEscClose(),this._form.querySelector(".form__close-button").addEventListener("click",(e=>{e.preventDefault(),this.close()}))}}class I extends ${constructor(e){super(e)}open(e,t){super.open(),this._photo=document.querySelector(".popup__photo").src=e,this._caption=document.querySelector(".popup__photo-caption").textContent=t}test(){console.log("desde test de popimage")}}class P extends ${constructor({formSubmitHandler:e},t){super(t),this._formSubmitHandler=e,this._form=this._popup.querySelector(".form")}close(){super.close(),this._form.id,this._form.reset(),this._popup.querySelector(".overlay").addEventListener("click",(e=>{this._popup.classList.remove("popup_opened"),e.stopImmediatePropagation()}))}getInputValues(){this._inputList=this._form.querySelectorAll(".form__input");const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(e){this.getInputValues(),super.setEventListeners(e),this._form.addEventListener("submit",(e=>{e.preventDefault(),e.stopImmediatePropagation(),this._formSubmitHandler(this.getInputValues()),document.forms.place.reset()}))}test(){console.log("desde test popup with form")}renderLoading(e){e?this._form.querySelector(".form__submit-button").textContent="Guardando...":(this._form.querySelector(".form__submit-button").textContent="Guardado",this.close())}}class z{constructor({data:e}){this._userName=e.name,this._userAboutMe=e["about-me"]}getUserInfo(){this._userName=r.textContent,this._userAboutMe=n.textContent}setUserInfo(){r.textContent=this._userName,n.textContent=this._userAboutMe}}class j extends ${constructor({submitHandler:e},t){super(t),this._submitHandler=e,this._form=this._popup.querySelector(".form")}setEventListeners(){h.addEventListener("click",(e=>{e.preventDefault(),e.stopImmediatePropagation(),console.log("desde set eventListeners"),this._submitHandler(),this.close()})),_.addEventListener("click",(e=>{e.preventDefault(),console.log("diste click a cverrar popup"),this.close()}))}submitFunctions(){h.addEventListener("click",(e=>{e.preventDefault(),e.stopImmediatePropagation(),this._submitHandler(),this.close()})),_.addEventListener("click",(e=>{e.preventDefault(),console.log("diste click a cverrar popup"),this.close()}))}}new q({formSelector:"profile",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}).enableValidation(),new q({formSelector:"place",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}).enableValidation(),new q({formSelector:"avatar",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"}).enableValidation(),e.defaultProfile();const w=new P({formSubmitHandler:t=>{w.renderLoading(!0),e.editProfile({name:t.name,about:t["about-me"]}).finally((()=>{w.renderLoading(!1)}));const o=new z({data:t});o.setUserInfo(),o.getUserInfo()}},o);w.setEventListeners(t);const H=[];e.cardsAddedRequest().then((e=>e.ok?e.json():Promise.reject(e.status))).then((t=>{!function(t){t.forEach((e=>{H.push(e)}));const o=new b({items:H,renderer:t=>{const r=new L({data:t,photoHandler:(e,t)=>{new I(c).open(e,t)},deleteHandler:t=>{const o=new j({submitHandler:()=>{e.deleteCard(t).then((e=>{})),r.trashBtnFunctions()}},p);o.setEventListeners(),o.open()}},"#card-template"),n=r.generateCard();o.addItem(n)}},C);o.renderItems()}(t)})).catch((e=>{console.log(`Error: ${e}`)})),function(){const t=new P({formSubmitHandler:o=>{t.renderLoading(!0),e.addNewCardPetition(o).then((o=>{document.querySelector(".card-container").prepend(function(t){const o=new L({data:t,photoHandler:(e,t)=>{new I(c).open(e,t)},deleteHandler:t=>{const r=new j({submitHandler:()=>{e.deleteCard(t),o.trashBtnFunctions(),console.log(t)}},p);r.submitFunctions(),console.log(t),r.open()}},"#card-template");return o.generateCard()}(o)),t.close()})).finally((()=>{w.renderLoading(!1)}))}},a);t.setEventListeners(i)}();const A=new P({formSubmitHandler:t=>{A.renderLoading(!0),e.updateAvatar({avatar:t.updateAvatar}).then((e=>{var t;t=e.avatar,y.src=t})).finally((()=>{A.renderLoading(!1)}))}},m);A.setEventListeners(f)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG1CQUFtQkMsR0FDbkJ6QixNQUFNa0wsSUFFTG5KLFNBQ0dDLGNBQWMsbUJBQ2R1QixRQTFDZixTQUF1QkQsR0FDckIsTUFBTTZILEVBQVUsSUFBSTNFLEVBQ2xCLENBQ0V0RixLQUFNb0MsRUFDTm1ELGFBQWMsQ0FBQzdHLEVBQUtKLEtBQ0osSUFBSXNKLEVBQWUxRyxHQUNWbUcsS0FBSzNJLEVBQUtKLEVBQWpDLEVBRUZrSCxjQUFnQnhCLElBQ2QsTUFBTTZGLEVBQWUsSUFBSVosRUFDdkIsQ0FDRUMsY0FBZSxLQUNiekwsRUFBSWlELFdBQVdzRCxHQUNmaUcsRUFBUWxELG9CQUNSeEgsUUFBUUMsSUFBSXdFLEVBQVosR0FHSnpDLEdBRUZzSSxFQUFhVCxrQkFDYjdKLFFBQVFDLElBQUl3RSxHQUNaNkYsRUFBYXhDLE1BQWIsR0FJSixrQkFHRixPQUFPNEMsRUFBUTVELGNBQ2hCLENBYXNCNkQsQ0FBY0YsSUFDekJELEVBQWV6QyxPQUFmLElBRURnQyxTQUFRLEtBQ1BELEVBQWlCWCxlQUFjLEVBQS9CLEdBVkosR0FjSnpILEdBRUY4SSxFQUFlckMsa0JBQWtCMUcsRUFDbEMsQ0FDRG1KLEdBSUEsTUFBTUMsRUFBa0IsSUFBSXBDLEVBQzFCLENBQ0VDLGtCQUFvQmpJLElBQ2xCb0ssRUFBZ0IxQixlQUFjLEdBRTlCakwsRUFDR3NDLGFBQWEsQ0FDWnBCLE9BQVFxQixFQUFLRCxlQUVkakIsTUFBTUMsSUFaZixJQUFzQnNMLElBYUN0TCxFQUFJSixPQVp6QmdELEVBQWNqRCxJQUFNMkwsQ0FZWixJQUVEZixTQUFRLEtBQ1BjLEVBQWdCMUIsZUFBYyxFQUE5QixHQVJKLEdBWUpqSCxHQUVGMkksRUFBZ0IxQyxrQkFBa0JoRyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L3V0aWxzL0RhdGEuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvQVBJLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL3NjcmlwdC9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9zY3JpcHQvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL3NjcmlwdC9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL3NjcmlwdC9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL3NjcmlwdC9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvc2NyaXB0L2NvbXBvbmVudHMvUG9wdXBDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XHJcbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzXzA3L1wiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZDczZmY4YTQtNWFkNy00MmNiLTk5OWMtZDA4NGNhMmU2ODQ3XCIsXHJcbiAgICBcImNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbi8vY29uc3RhbnRlcyB1bml2ZXJzYWxlc1xyXG5leHBvcnQgY29uc3QgYnRuRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYnRuQ3JlYXRlUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGJ0bkNsb3NlRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX2Nsb3NlLWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCB1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdXNlci1uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgdXNlckFib3V0TWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3VzZXItcHJvZmVzc2lvblwiKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWUtaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCB1c2VyUHJvZmVzc2lvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhYm91dC1tZS1pbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IGJ0bkFkZE5ld1BsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYnRuQ2xvc2VOZXdQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV9fY2xvc2UtYnV0dG9uX3R5cGVfbmV3LXBsYWNlXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQWRkTmV3UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfbmV3LXBsYWNlXCIpO1xyXG5leHBvcnQgY29uc3QgYnRuU3VibWl0TmV3UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX3N1Ym1pdC1idXR0b25fcGxhY2VcIlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkLWNvbnRhaW5lclwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfcGhvdG9cIik7XHJcblxyXG4vL3BvcHVwIHBob3RvXHJcbmV4cG9ydCBjb25zdCBsaW5rUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19waG90b1wiKTtcclxuZXhwb3J0IGNvbnN0IGNhcHRpb25Qb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3Bob3RvLWNhcHRpb25cIik7XHJcbmV4cG9ydCBjb25zdCBidG5DbG9zZVBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5cclxuLy9kZWxldGUgcG9wdXBcclxuZXhwb3J0IGNvbnN0IGJ0bkRlbGV0ZUNvbmZpcm1hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuZm9ybV9fc3VibWl0LWJ1dHRvbl9kZWxldGVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcG9wdXBEZWxldGVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2RlbGV0ZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNsb3NlRGVsZXRlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmZvcm1fX2Nsb3NlLWJ1dHRvbl90eXBlX2RlbGV0ZVwiXHJcbik7XHJcbi8vZWRpdCBBdmF0YXJcclxuZXhwb3J0IGNvbnN0IHBvcHVwVXBkYXRlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF90eXBlX3VwZGF0ZS1hdmF0YXJcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgYnRuVXBkYXRlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19hdmF0YXItb3ZlcmxheVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcbiIsImltcG9ydCB7XHJcbiAgdXNlck5hbWUsXHJcbiAgcG9wdXBQaG90byxcclxuICB1c2VyQWJvdXRNZSxcclxuICB1c2VyQXZhdGFyLFxyXG4gIGxpa2VDb3VudGVyLFxyXG4gIHBvcHVwRGVsZXRlQ2FyZCxcclxuICBhcGksXHJcbn0gZnJvbSBcIi4uL3V0aWxzL0RhdGFcIjtcclxuaW1wb3J0IHsgcmVuZGVyQ2FyZHMsIGFkZGVkQ2FyZHNBcnJheSB9IGZyb20gXCIuLi8uLi9pbmRleC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gIH1cclxuICAvLyBQcm9maWxlIEFQSVxyXG4gIHJlbmRlclJlc3VsdHModXNlckRhdGEpIHtcclxuICAgIHVzZXJOYW1lLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZTtcclxuICAgIHVzZXJBYm91dE1lLnRleHRDb250ZW50ID0gdXNlckRhdGEuYWJvdXQ7XHJcbiAgICB1c2VyQXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcclxuICB9XHJcbiAgZGVmYXVsdFByb2ZpbGUoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIC8vY29uc29sZS5sb2coXCJ0b2RvIG9rXCIpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHRoaXMucmVuZGVyUmVzdWx0cyhyZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGVkaXRQcm9maWxlKG5ld1Byb2ZpbGUpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiY29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmV3UHJvZmlsZS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBuZXdQcm9maWxlLmFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInRvZG8gb2tcIik7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIHVwZGF0ZUF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgXCJjb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInRvZG8gb2tcIik7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgICB9KVxyXG5cclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIC8vbGlrZXNcclxuICBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICBcImNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSxcclxuICAgICAgICBhYm91dDogcHJvZmlsZS5hYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJ0b2RvIG9rXCIpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICBcImNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSxcclxuICAgICAgICBhYm91dDogcHJvZmlsZS5hYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJ0b2RvIG9rXCIpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICAvLyB0ZXJtaW5hIHByb2ZpbGUgZnVuY3Rpb25zXHJcbiAgY2FyZHNBZGRlZFJlcXVlc3QoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdDYXJkUGV0aXRpb24obmV3Q2FyZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICBcImNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5ld0NhcmQucGxhY2VOYW1lLFxyXG4gICAgICAgIGxpbms6IG5ld0NhcmQubGluayxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PlxyXG4gICAgICAgIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKVxyXG4gICAgICApXHJcblxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiY29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwidG9kbyBva1wiKTtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybkNhcmRJbmZvKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInRvZG8gb2tcIik7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgICB9KVxyXG5cclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtc0FycmF5ID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXNBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IHJlZ0V4ID0ge1xyXG4gIG5hbWU6IC9eW0EtWmEtelxcLV17MiwxMDB9JC8sXHJcbiAgYWJvdXRNZTogL15bQS1aYS16XFwtXXsyLDIwfSQvLFxyXG4gIHBsYWNlTmFtZTogL15bQS1aYS16XFwtXXszLDIwfSQvLFxyXG4gIGxpbms6IC9eW0EtWmEtelxcLV17NCw1MDB9JC8sXHJcbiAgdXBkYXRlQXZhdGFyOiAvXltBLVphLXpcXC1dezQsNTAwfSQvLFxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKG9ialRvVmFsaWRhdGUpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IG9ialRvVmFsaWRhdGUuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9ialRvVmFsaWRhdGUuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb2JqVG9WYWxpZGF0ZS5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvYmpUb1ZhbGlkYXRlLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvYmpUb1ZhbGlkYXRlLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvYmpUb1ZhbGlkYXRlLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG4gIC8vdGVybWluYSBlbCBjb25zdHJ1Y3RvclxyXG4gIHN3aXRjaGluZ0lucHV0KGV2dCkge1xyXG4gICAgc3dpdGNoIChldnQudGFyZ2V0Lm5hbWUpIHtcclxuICAgICAgY2FzZSBcIm5hbWVcIjpcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkocmVnRXgubmFtZSwgZXZ0LnRhcmdldCwgdGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnJvckVsZW1lbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiIGFib3V0TWVcIjpcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkocmVnRXguYWJvdXRNZSwgZXZ0LnRhcmdldCwgdGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnJvckVsZW1lbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwicGxhY2VOYW1lXCI6XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KFxyXG4gICAgICAgICAgcmVnRXgucGxhY2VOYW1lLFxyXG4gICAgICAgICAgZXZ0LnRhcmdldCxcclxuICAgICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvclxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhlcnJvckVsZW1lbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwibGlua1wiOlxyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShyZWdFeC5saW5rLCBldnQudGFyZ2V0LCB0aGlzLl9mb3JtU2VsZWN0b3IpO1xyXG5cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcInVwZGF0ZUF2YXRhclwiOlxyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShcclxuICAgICAgICAgIHJlZ0V4LnVwZGF0ZUF2YXRhcixcclxuICAgICAgICAgIGV2dC50YXJnZXQsXHJcbiAgICAgICAgICB0aGlzLl9mb3JtU2VsZWN0b3JcclxuICAgICAgICApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGV4cHJlc2lvbiwgaW5wdXRFbGVtZW50LCBmb3JtSUQpIHtcclxuICAgIGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ybUlEKTtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuXHJcbiAgICBpZiAoZXhwcmVzaW9uLnRlc3QoaW5wdXRFbGVtZW50LnZhbHVlKSkge1xyXG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIHRlcm1pbmEgY2hlY2sgc2hvdyBlcnJvclxyXG4gIC8vIGlzIHZhbGlkXHJcblxyXG4gIGlzVmFsaWQoZm9ybUlEKSB7XHJcbiAgICBsZXQgdmFsaWQgPSBcIlwiO1xyXG4gICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmb3JtSUQpO1xyXG4gICAgY29uc3QgaW5wdXRzTGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICBpbnB1dHNMaXN0LmV2ZXJ5KChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICByZXR1cm4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICB9KVxyXG4gICAgKSB7XHJcbiAgICAgIHZhbGlkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsaWQ7XHJcbiAgfVxyXG5cclxuICAvLyB0b2dnbGVCdG5cclxuICB0b2dnbGVCdG5TdGF0ZShmb3JtSUQpIHtcclxuICAgIGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ybUlEKTtcclxuICAgIGNvbnN0IGJ0bkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICBpZiAodGhpcy5pc1ZhbGlkKGZvcm1JRCkgPT09IHRydWUpIHtcclxuICAgICAgYnRuRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnRuRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9wcnVlYmEgZW5hYmxlIHZhbGlkYXRpb25cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9mb3JtU2VsZWN0b3IpO1xyXG5cclxuICAgIGNvbnN0IGlucHV0c0xpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy50b2dnbGVCdG5TdGF0ZSh0aGlzLl9mb3JtU2VsZWN0b3IpO1xyXG4gICAgaW5wdXRzTGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc3dpdGNoaW5nSW5wdXQoZXZ0KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ0blN0YXRlKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbi8vdGVybWluYSBvYmpldG9cclxuLy8gIHBydWViYSBQYXJhIFByb2ZpbGUgZm9ybVxyXG5cclxuLy9Qcm95ZWN0byA4XHJcbiIsImltcG9ydCB7XHJcbiAgcG9wdXBQaG90byxcclxuICBsaW5rUG9wdXAsXHJcbiAgY2FwdGlvblBvcHVwLFxyXG4gIGJ0bkNsb3NlUGhvdG8sXHJcbiAgYXBpLFxyXG59IGZyb20gXCIuLi91dGlscy9EYXRhLmpzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtY29udGFpbmVyXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcGhvdG9IYW5kbGVyLCBkZWxldGVIYW5kbGVyIH0sIHRlbXBsYXRlU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fcGhvdG9IYW5kbGVyID0gcGhvdG9IYW5kbGVyO1xyXG4gICAgdGhpcy5fZGVsZXRlSGFuZGxlciA9IGRlbGV0ZUhhbmRsZXI7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgfVxyXG4gIGdldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50O1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGVcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2UtY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLmdldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlLWNhcmRfX25hbWVcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZS1jYXJkX19waG90b1wiKS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5fY2FyZEVsZW1lbnQpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQuaWQgPSB0aGlzLl9pZDtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGlrZS1idXR0b24tY291bnRlclwiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgIHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlT3BlblBvcHVwKCkge1xyXG4gICAgdGhpcy5fcGhvdG9IYW5kbGVyKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsb3NlUG9wdXAoKSB7XHJcbiAgICBsaW5rUG9wdXAuc3JjID0gXCIgXCI7XHJcbiAgICBjYXB0aW9uUG9wdXAudGV4dENvbnRlbnQgPSBcIiBcIjtcclxuICAgIHBvcHVwUGhvdG8uY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICB9XHJcbiAgbGlrZWFkZGluZygpIHt9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlLWNhcmRfX3Bob3RvXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZU9wZW5Qb3B1cCgpO1xyXG4gICAgICB9KTtcclxuICAgIGJ0bkNsb3NlUGhvdG8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2xvc2VQb3B1cCgpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCB0cmFzaEJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHJhc2gtYnV0dG9uXCIpO1xyXG4gICAgdHJhc2hCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgLy8gY29uc29sZS5sb2coXCJlbnZpYWRvIGRlc2RlIHNldGV2ZW50IGRlIGNhcmQgb3BlbiBoYW5kbGVyXCIpO1xyXG4gICAgICB0aGlzLl9kZWxldGVIYW5kbGVyKHRoaXMuX2NhcmRFbGVtZW50LmlkKTtcclxuICAgICAgLy8gY29uc29sZS5sb2codGhpcy5fY2FyZEVsZW1lbnQuaWQpO1xyXG4gICAgfSk7XHJcbiAgICAvL2NvbnN0IGxpa2VOdW1iZXIgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpa2UtYnV0dG9uLWNvdW50ZXJcIik7XHJcbiAgICBjb25zdCBsaWtlSWNvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGlrZS1idXR0b25cIik7XHJcbiAgICBsaWtlSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJsaWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImxpa2UtYnV0dG9uX2FjdGl2ZVwiKSkge1xyXG4gICAgICAgIGFwaS5hZGRMaWtlKHRoaXMuX2NhcmRFbGVtZW50LmlkKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIGxldCBsaWtlc2luaXRBcnJheSA9IHJlcy5saWtlcztcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxpa2VzaW5pdEFycmF5KTtcclxuXHJcbiAgICAgICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmxpa2UtYnV0dG9uLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICBsaWtlc2luaXRBcnJheS5sZW5ndGg7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUxpa2UodGhpcy5fY2FyZEVsZW1lbnQuaWQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgIGNvbnN0IGxpa2VzaW5pdEFycmF5ID0gcmVzLmxpa2VzO1xyXG4gICAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5saWtlLWJ1dHRvbi1jb3VudGVyXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgICAgICAgbGlrZXNpbml0QXJyYXkubGVuZ3RoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYm9ycmFzdGUgdW4gbGlrZVwiKTtcclxuICAgICAgfVxyXG4gICAgICAvLyB0aGlzLmxpa2VhZGRpbmcoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJhc2hCdG5GdW5jdGlvbnMoKSB7XHJcbiAgICBjb25zdCB0cmFzaEJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHJhc2gtYnV0dG9uXCIpO1xyXG4gICAgY29uc3QgY2FyZFRvUmVtb3ZlID0gdHJhc2hCdG4uY2xvc2VzdChcIi5wbGFjZS1jYXJkXCIpO1xyXG4gICAgY2FyZFRvUmVtb3ZlLnJlbW92ZSgpO1xyXG4gIH1cclxuICB0ZXN0KCkge1xyXG4gICAgY29uc29sZS5sb2codGhpcy5faWQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHRoaXMuX3BvcHVwID0gcG9wdXA7XHJcbiAgICB0aGlzLl9mb3JtID0gcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdDtcclxuICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycyhvcGVuQnV0dG9uKSB7XHJcbiAgICBvcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMub3BlbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5mb3JtX19jbG9zZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy8gcG9wdXAgd2l0aCBpbWFnZVxyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICB9XHJcbiAgb3BlbihzcmMsIG5hbWUpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX3Bob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcGhvdG9cIikuc3JjID0gc3JjO1xyXG5cclxuICAgIHRoaXMuX2NhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9fcGhvdG8tY2FwdGlvblwiXHJcbiAgICApLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcbiAgdGVzdCgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiZGVzZGUgdGVzdCBkZSBwb3BpbWFnZVwiKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBmb3JtU3VibWl0SGFuZGxlciB9LCBwb3B1cCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5fZm9ybVN1Ym1pdEhhbmRsZXIgPSBmb3JtU3VibWl0SGFuZGxlcjtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICBpZiAodGhpcy5fZm9ybS5pZCA9PSBcInBsYWNlXCIgfHwgXCJhdmF0YXJcIikge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhcImRlc2RlIHBvcHVwIGZvcm0gbDEyXCIpO1xyXG4gICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgICAgZXZ0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGdldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycyhvcGVuQnV0dG9uKSB7XHJcbiAgICB0aGlzLmdldElucHV0VmFsdWVzKCk7XHJcblxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMob3BlbkJ1dHRvbik7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgZXZ0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgICB0aGlzLl9mb3JtU3VibWl0SGFuZGxlcih0aGlzLmdldElucHV0VmFsdWVzKCkpO1xyXG5cclxuICAgICAgLy90aGlzLmNsb3NlKCk7XHJcbiAgICAgIGRvY3VtZW50LmZvcm1zLnBsYWNlLnJlc2V0KCk7XHJcbiAgICAgIC8vICBjb25zb2xlLmxvZyhcImRlc2RlIHN0RXZlbnRMaXN0ZW5lclwiKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICB0ZXN0KCkge1xyXG4gICAgY29uc29sZS5sb2coXCJkZXNkZSB0ZXN0IHBvcHVwIHdpdGggZm9ybVwiKTtcclxuICB9XHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIikudGV4dENvbnRlbnQgPVxyXG4gICAgICAgIFwiR3VhcmRhbmRvLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiR3VhcmRhZG9cIjtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyB1c2VyTmFtZSwgdXNlckFib3V0TWUgfSBmcm9tIFwiLi4vdXRpbHMvRGF0YS5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB1c2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fdXNlckFib3V0TWUgPSBkYXRhW1wiYWJvdXQtbWVcIl07XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZS50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX3VzZXJBYm91dE1lID0gdXNlckFib3V0TWUudGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbygpIHtcclxuICAgIHVzZXJOYW1lLnRleHRDb250ZW50ID0gdGhpcy5fdXNlck5hbWU7XHJcbiAgICB1c2VyQWJvdXRNZS50ZXh0Q29udGVudCA9IHRoaXMuX3VzZXJBYm91dE1lO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuaW1wb3J0IHsgYnRuRGVsZXRlQ29uZmlybWF0aW9uLCBhcGksIGNsb3NlRGVsZXRlUG9wdXAgfSBmcm9tIFwiLi4vdXRpbHMvRGF0YS5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHN1Ym1pdEhhbmRsZXIgfSwgcG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBzdWJtaXRIYW5kbGVyO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgYnRuRGVsZXRlQ29uZmlybWF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBldnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiZGVzZGUgc2V0IGV2ZW50TGlzdGVuZXJzXCIpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VEZWxldGVQb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc29sZS5sb2coXCJkaXN0ZSBjbGljayBhIGN2ZXJyYXIgcG9wdXBcIik7XHJcbiAgICAgIC8vIGV2dC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHN1Ym1pdEZ1bmN0aW9ucygpIHtcclxuICAgIGJ0bkRlbGV0ZUNvbmZpcm1hdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgZXZ0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VEZWxldGVQb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc29sZS5sb2coXCJkaXN0ZSBjbGljayBhIGN2ZXJyYXIgcG9wdXBcIik7XHJcbiAgICAgIC8vIGV2dC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQge1xyXG4gIGJ0bkVkaXRQcm9maWxlLFxyXG4gIHBvcHVwRWRpdFByb2ZpbGUsXHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIGRlZmF1bHRDYXJkcyxcclxuICBwb3B1cFBob3RvLFxyXG4gIHBvcHVwQWRkTmV3UGxhY2UsXHJcbiAgYnRuQWRkTmV3UGxhY2UsXHJcbiAgYnRuU3VibWl0TmV3UGxhY2UsXHJcbiAgdXNlckF2YXRhcixcclxuICB1c2VyTmFtZSxcclxuICB1c2VyQWJvdXRNZSxcclxuICBwb3B1cERlbGV0ZUNhcmQsXHJcbiAgYnRuRGVsZXRlQ2FyZCxcclxuICBhcGksXHJcbiAgdXBkYXRlQXZhdGFyLFxyXG4gIHBvcHVwVXBkYXRlQXZhdGFyLFxyXG4gIGJ0blVwZGF0ZUF2YXRhcixcclxuICBwcm9maWxlQXZhdGFyLFxyXG59IGZyb20gXCIuL3NjcmlwdC91dGlscy9EYXRhLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL3NjcmlwdC9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuXHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi9zY3JpcHQvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IENhcmQsIGNhcmRzQ29udGFpbmVyIH0gZnJvbSBcIi4vc2NyaXB0L2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vc2NyaXB0L2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vc2NyaXB0L2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgdXNlckluZm8gZnJvbSBcIi4vc2NyaXB0L2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwQ29uZmlybWF0aW9uIGZyb20gXCIuL3NjcmlwdC9jb21wb25lbnRzL1BvcHVwQ29uZmlybWF0aW9uXCI7XHJcblxyXG4vLyBvYmpldG9zIHBhcmEgdmFsaWRhclxyXG5jb25zdCB2YWxpZGF0aW9uT2JqZWN0ID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCJwcm9maWxlXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuXHJcbmNvbnN0IHZhbGlkYXRpb25PYmplY3QyID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCJwbGFjZVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbn07XHJcbmNvbnN0IHZhbGlkYXRpb25PYmplY3RBdmF0YXIgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcImF2YXRhclwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbn07XHJcblxyXG4vL2xsYW1hbmRvIGEgRm9ybVZhbGlkYXRvclxyXG5jb25zdCBQcm9maWxlVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25PYmplY3QpO1xyXG5jb25zdCB0ZXN0ID0gUHJvZmlsZVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vL3BydWViYSBwYXJhIHBsYWNlIGZvcm1cclxuY29uc3QgUGxhY2VWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbk9iamVjdDIpO1xyXG5jb25zdCB0ZXN0MiA9IFBsYWNlVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNvbnN0IGF2YXRhclZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uT2JqZWN0QXZhdGFyKTtcclxuYXZhdGFyVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbi8vcG9wdXAgZm9ybSBwcm9maWxlXHJcbmFwaS5kZWZhdWx0UHJvZmlsZSgpO1xyXG5jb25zdCBmb3JtUG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgZm9ybVN1Ym1pdEhhbmRsZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgIC8vIGFxdWkgZW1waWV6YSBjYWxsYmFja1xyXG4gICAgICBmb3JtUG9wdXBQcm9maWxlLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgICBhcGlcclxuICAgICAgICAuZWRpdFByb2ZpbGUoe1xyXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgYWJvdXQ6IGRhdGFbXCJhYm91dC1tZVwiXSxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgIGZvcm1Qb3B1cFByb2ZpbGUucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IHVzZXIgPSBuZXcgdXNlckluZm8oeyBkYXRhOiBkYXRhIH0pO1xyXG4gICAgICB1c2VyLnNldFVzZXJJbmZvKCk7XHJcbiAgICAgIHVzZXIuZ2V0VXNlckluZm8oKTtcclxuICAgIH0sIC8vYXF1aSB0ZXJtaW5hXHJcbiAgfSxcclxuICBwb3B1cEVkaXRQcm9maWxlXHJcbik7XHJcbmZvcm1Qb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoYnRuRWRpdFByb2ZpbGUpO1xyXG5cclxuLy8gZnVuY2lvbmVzIGRlIHBlcmZpbFxyXG5cclxuLy8gUmVuZGVpemFyIGluaXRpYWwgQ2FyZHNcclxuZXhwb3J0IGNvbnN0IGFkZGVkQ2FyZHNBcnJheSA9IFtdO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckNhcmRzKGRhdGFBcnJheSkge1xyXG4gIGRhdGFBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICBhZGRlZENhcmRzQXJyYXkucHVzaChpdGVtKTtcclxuICB9KTtcclxuICAvLyBjb25zb2xlLmxvZyhhZGRlZENhcmRzQXJyYXkpO1xyXG4gIGNvbnN0IGRlZmF1bHRDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICBpdGVtczogYWRkZWRDYXJkc0FycmF5LFxyXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRhdGE6IGl0ZW0sXHJcbiAgICAgICAgICAgIHBob3RvSGFuZGxlcjogKHNyYywgbmFtZSkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHBob3RvID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwUGhvdG8pO1xyXG4gICAgICAgICAgICAgIGNvbnN0IG5ld1Bob3RvID0gcGhvdG8ub3BlbihzcmMsIG5hbWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZWxldGVIYW5kbGVyOiAoaWQpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBjb25maXJtYXRpb24gPSBuZXcgUG9wdXBDb25maXJtYXRpb24oXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIHN1Ym1pdEhhbmRsZXI6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChpZCkudGhlbigocmVzKSA9PiB7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FyZC50cmFzaEJ0bkZ1bmN0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZFxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgY29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgICAgICAgIGNvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgXCIjY2FyZC10ZW1wbGF0ZVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBuZXdDYXJkID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICAgICAgICBkZWZhdWx0Q2FyZExpc3QuYWRkSXRlbShuZXdDYXJkKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBjYXJkc0NvbnRhaW5lclxyXG4gICk7XHJcbiAgZGVmYXVsdENhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRpYWxDYXJkc1JlcXVlc3QoKSB7XHJcbiAgY29uc3QgaW5pdGlhbENhcmRzQXBpID0gYXBpLmNhcmRzQWRkZWRSZXF1ZXN0KCk7XHJcbiAgaW5pdGlhbENhcmRzQXBpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRvZG8gb2tcIik7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZHMocmVzKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcclxuICAgIH0pO1xyXG59XHJcbmluaXRpYWxDYXJkc1JlcXVlc3QoKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU5ld0NhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGFwaUNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YTogaXRlbSxcclxuICAgICAgcGhvdG9IYW5kbGVyOiAoc3JjLCBuYW1lKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGhvdG8gPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBQaG90byk7XHJcbiAgICAgICAgY29uc3QgbmV3UGhvdG8gPSBwaG90by5vcGVuKHNyYywgbmFtZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGRlbGV0ZUhhbmRsZXI6IChpZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cENvbmZpcm1hdGlvbihcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc3VibWl0SGFuZGxlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGlkKTtcclxuICAgICAgICAgICAgICBhcGlDYXJkLnRyYXNoQnRuRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coaWQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHBvcHVwRGVsZXRlQ2FyZFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uZmlybWF0aW9uLnN1Ym1pdEZ1bmN0aW9ucygpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGlkKTsgLy8gZXN0YSBmdW5jaW9uIHNpIHJlZ3Jlc2EgYWwgaWQgZGUgdmFyZFxyXG4gICAgICAgIGNvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coYXJndW1lbnRvKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCJcclxuICApO1xyXG5cclxuICByZXR1cm4gYXBpQ2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5mdW5jdGlvbiBuZXdDYXJkQXBpKCkge1xyXG4gIGNvbnN0IGZvcm1Qb3B1cFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oIC8vIGRlY2xhcmFuZG8gZm9ybVxyXG4gICAge1xyXG4gICAgICBmb3JtU3VibWl0SGFuZGxlcjogKG5ld0NhcmQpID0+IHtcclxuICAgICAgICBmb3JtUG9wdXBQbGFjZS5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld0NhcmQpO1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmFkZE5ld0NhcmRQZXRpdGlvbihuZXdDYXJkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAgICAgICBkb2N1bWVudFxyXG4gICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtY29udGFpbmVyXCIpXHJcbiAgICAgICAgICAgICAgLnByZXBlbmQoY3JlYXRlTmV3Q2FyZChyZXN1bHQpKTtcclxuICAgICAgICAgICAgZm9ybVBvcHVwUGxhY2UuY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGZvcm1Qb3B1cFByb2ZpbGUucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBwb3B1cEFkZE5ld1BsYWNlXHJcbiAgKTtcclxuICBmb3JtUG9wdXBQbGFjZS5zZXRFdmVudExpc3RlbmVycyhidG5BZGROZXdQbGFjZSk7XHJcbn1cclxubmV3Q2FyZEFwaSgpO1xyXG5mdW5jdGlvbiByZW5kZXJBdmF0YXIoYXZhdGFyVXJsKSB7XHJcbiAgcHJvZmlsZUF2YXRhci5zcmMgPSBhdmF0YXJVcmw7XHJcbn1cclxuY29uc3QgbmV3UHBkYXRlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgZm9ybVN1Ym1pdEhhbmRsZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgIG5ld1BwZGF0ZUF2YXRhci5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG5cclxuICAgICAgYXBpXHJcbiAgICAgICAgLnVwZGF0ZUF2YXRhcih7XHJcbiAgICAgICAgICBhdmF0YXI6IGRhdGEudXBkYXRlQXZhdGFyLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgcmVuZGVyQXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgbmV3UHBkYXRlQXZhdGFyLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHBvcHVwVXBkYXRlQXZhdGFyXHJcbik7XHJcbm5ld1BwZGF0ZUF2YXRhci5zZXRFdmVudExpc3RlbmVycyhidG5VcGRhdGVBdmF0YXIpO1xyXG4iXSwibmFtZXMiOlsiYXBpIiwiY29uc3RydWN0b3IiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2F1dGhvcml6YXRpb24iLCJhdXRob3JpemF0aW9uIiwicmVuZGVyUmVzdWx0cyIsInVzZXJEYXRhIiwidXNlck5hbWUiLCJ0ZXh0Q29udGVudCIsIm5hbWUiLCJ1c2VyQWJvdXRNZSIsImFib3V0IiwidXNlckF2YXRhciIsInNyYyIsImF2YXRhciIsImRlZmF1bHRQcm9maWxlIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZWRpdFByb2ZpbGUiLCJuZXdQcm9maWxlIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVBdmF0YXIiLCJkYXRhIiwiYWRkTGlrZSIsImNhcmRJZCIsInByb2ZpbGUiLCJkZWxldGVMaWtlIiwiY2FyZHNBZGRlZFJlcXVlc3QiLCJhZGROZXdDYXJkUGV0aXRpb24iLCJuZXdDYXJkIiwicGxhY2VOYW1lIiwibGluayIsImRlbGV0ZUNhcmQiLCJyZXR1cm5DYXJkSW5mbyIsImJ0bkVkaXRQcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBFZGl0UHJvZmlsZSIsImJ0bkFkZE5ld1BsYWNlIiwicG9wdXBBZGROZXdQbGFjZSIsInBvcHVwUGhvdG8iLCJsaW5rUG9wdXAiLCJjYXB0aW9uUG9wdXAiLCJidG5DbG9zZVBob3RvIiwiYnRuRGVsZXRlQ29uZmlybWF0aW9uIiwicG9wdXBEZWxldGVDYXJkIiwiY2xvc2VEZWxldGVQb3B1cCIsInBvcHVwVXBkYXRlQXZhdGFyIiwiYnRuVXBkYXRlQXZhdGFyIiwicHJvZmlsZUF2YXRhciIsIlNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfaXRlbXNBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiaXRlbSIsInByZXBlbmQiLCJyZW5kZXJJdGVtcyIsImZvckVhY2giLCJyZWdFeCIsIkZvcm1WYWxpZGF0b3IiLCJvYmpUb1ZhbGlkYXRlIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInN3aXRjaGluZ0lucHV0IiwiZXZ0IiwidGFyZ2V0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImV4cHJlc2lvbiIsImlucHV0RWxlbWVudCIsImZvcm1JRCIsImVycm9yRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJ0ZXN0IiwidmFsdWUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImFkZCIsImlzVmFsaWQiLCJ2YWxpZCIsImZvcm1FbGVtZW50IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ0b2dnbGVCdG5TdGF0ZSIsImJ0bkVsZW1lbnQiLCJlbmFibGVWYWxpZGF0aW9uIiwiaW5wdXRzTGlzdCIsImlucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhcmRzQ29udGFpbmVyIiwiQ2FyZCIsInBob3RvSGFuZGxlciIsImRlbGV0ZUhhbmRsZXIiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiX25hbWUiLCJfbGluayIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfcGhvdG9IYW5kbGVyIiwiX2RlbGV0ZUhhbmRsZXIiLCJnZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJsZW5ndGgiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlT3BlblBvcHVwIiwiX2hhbmRsZUNsb3NlUG9wdXAiLCJsaWtlYWRkaW5nIiwidG9nZ2xlIiwiY29udGFpbnMiLCJsaWtlc2luaXRBcnJheSIsInRyYXNoQnRuRnVuY3Rpb25zIiwiY2xvc2VzdCIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfZm9ybSIsIm9wZW4iLCJjbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsInByZXZlbnREZWZhdWx0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJvcGVuQnV0dG9uIiwiUG9wdXBXaXRoSW1hZ2UiLCJzdXBlciIsIl9waG90byIsIl9jYXB0aW9uIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXRIYW5kbGVyIiwiX2Zvcm1TdWJtaXRIYW5kbGVyIiwicmVzZXQiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJnZXRJbnB1dFZhbHVlcyIsIl9pbnB1dExpc3QiLCJmb3JtVmFsdWVzIiwiZm9ybXMiLCJwbGFjZSIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJ1c2VySW5mbyIsIl91c2VyTmFtZSIsIl91c2VyQWJvdXRNZSIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJQb3B1cENvbmZpcm1hdGlvbiIsInN1Ym1pdEhhbmRsZXIiLCJfc3VibWl0SGFuZGxlciIsInN1Ym1pdEZ1bmN0aW9ucyIsImZvcm1Qb3B1cFByb2ZpbGUiLCJmaW5hbGx5IiwidXNlciIsImFkZGVkQ2FyZHNBcnJheSIsImRhdGFBcnJheSIsInB1c2giLCJkZWZhdWx0Q2FyZExpc3QiLCJjYXJkIiwiY29uZmlybWF0aW9uIiwicmVuZGVyQ2FyZHMiLCJmb3JtUG9wdXBQbGFjZSIsInJlc3VsdCIsImFwaUNhcmQiLCJjcmVhdGVOZXdDYXJkIiwibmV3Q2FyZEFwaSIsIm5ld1BwZGF0ZUF2YXRhciIsImF2YXRhclVybCJdLCJzb3VyY2VSb290IjoiIn0=